"use strict";var L2={};L2.compile=function(){throw new Error("compiler not included")},function(){if("object"==typeof window&&"object"==typeof window.document){var r=document.getElementsByTagName("title");0!==r.length&&r[0].getAttribute("data-L2-ide")?L2.runningIn="object"==typeof global&&"function"==typeof global.require?"nw":"br":L2.runningIn="wp"}else{if("object"!=typeof global)throw new Error("cannot determine environment that L2 is running in");L2.runningIn="function"==typeof global.require?"nc":"nd"}}(),"nw"===L2.runningIn||"nd"===L2.runningIn||"nc"===L2.runningIn?(L2.node_fs=require("fs"),L2.node_path=require("path"),L2.node_es=require("event-stream"),L2.node_zlib=require("zlib"),L2.node_concat=require("concat-stream"),L2.node_stringdecode=require("string_decoder").StringDecoder,L2.node_request=require("request"),L2.node_rimraf=require("rimraf"),L2.node_readChunk=require("read-chunk"),L2.iFile=require("./iFile"),"nw"!==L2.runningIn&&(global.L2=L2)):L2.modules={loaded:{}},Function.prototype.toString=function(){return"function"},String.prototype.replaceStr=function(r,e){return this.replace(r,String(e))},String.prototype.matchMod=function(r){var e=this.match(r);if(e){if(r instanceof RegExp&&r.global)return new L2.ArJSA(e);var t=new L2.ArJSA([e[0],e.index,e.input]);return t.rk={match:0,position:1,input:2},t.z=!0,1!==e.length&&(t.v[3]=new L2.Box(new L2.ArJSA(e.slice(1))),t.r=4,t.rk.sub=3),t}return new L2.ArJSA([])},Date.prototype.getDayName=function(){return L2.aux.dayNames[this.getDay()]},Date.prototype.getUTCDayName=function(){return L2.aux.dayNames[this.getUTCDay()]},Date.prototype.getMonthName=function(){return L2.aux.monthNames[this.getMonth()]},Date.prototype.getUTCMonthName=function(){return L2.aux.monthNames[this.getUTCMonth()]},Date.prototype.UTCaddDate=function(r,e){return this.addDate(r,e,!0)},Date.prototype.subDate=function(r,e){return this.addDate(-r,e)},Date.prototype.UTCsubDate=function(r,e){return this.addDate(-r,e,!0)},Date.prototype.addDate=function(r,e,t){"number"!=typeof r&&(r=Number(r)),void 0===e?e="day":"week"===e&&(r*=7,e="day");var n=L2.aux.timeUnits[e];if(!n)throw new Error("invalid time unit");return t&&(n="UTC"+n),new Date(new Date(this)["set"+n](r+this["get"+n]()))},L2.ops={maxEnt:1e7},L2.assert={nonNegInt:function(r){if(Math.round(r)!=r||0>r||!isFinite(r))throw new Error("non-negative integer expected");return r},posInt:function(r){if(Math.round(r)!=r||0>=r||!isFinite(r))throw new Error("positive integer expected");return r},validShAr:function(r){var e,t=1,n=r.v.length;if(n>3||0===n)throw new Error("shape table must have 1, 2 or 3 entries");for(var i=0;n>i;i++){if(e=r.v[i],Math.round(e)!=e||0>e||!isFinite(e))throw new Error("non-negative integer expected");t*=e}return L2.assert.maxEnt(t),t},maxEnt:function(r){if(r>L2.ops.maxEnt)throw new Error("number of entries will exceed maximum: "+L2.ops.maxEnt.toExponential())},func:function(r){if("function"!=typeof r)throw new Error("function expected");return r},node:function(){if(!L2.node_path)throw new Error("operator not available in this environment")}},L2.tab=function(r){return r instanceof L2.Ar?r:new L2.ArJSA([r])},L2.sca=function(r){return r instanceof L2.Ar?r.v[0]:r},L2.aux={absPath:function(r){return L2.node_path?L2.node_path.resolve(r):r},L2_JS:function(r){var e=L2.node_fs.readFileSync(r,"utf8");e=L2.compile(e,r),r=r.slice(0,-3)+".js",L2.node_fs.writeFileSync(r,e)},expandDim:{r:"row",c:"column",p:"page"},lettersJSA:["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],lettersJSO:{a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7,i:8,j:9,k:10,l:11,m:12,n:13,o:14,p:15,q:16,r:17,s:18,t:19,u:20,v:21,w:22,x:23,y:24,z:25,A:26,B:27,C:28,D:29,E:30,F:31,G:32,H:33,I:34,J:35,K:36,L:37,M:38,N:39,O:40,P:41,Q:42,R:43,S:44,T:45,U:46,V:47,W:48,X:49,Y:50,Z:51},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],timeUnits:{year:"FullYear",month:"Month",day:"Date",hour:"Hours",minute:"Minutes",second:"Seconds",milli:"Milliseconds"},prt:function(r){return r},prtDebug:function(){throw new Error("operator not available in this environment")},jsToStr:function(){throw new Error("operator not available in this environment")},plot:function(){throw new Error("operator not available in this environment")},clear:function(){throw new Error("operator not available in this environment")},onLoad:function(){throw new Error("operator not available in this environment")},ajaxGet:function(){throw new Error("operator not available in this environment")},ajaxLoad:function(){throw new Error("operator not available in this environment")},vg:function(){throw new Error("operator not available in this environment")},vgSpec:function(r,e,t,n,i,o,s,h,f){function a(r){return void 0===r?void 0:r.toString()}var v={data:null,mark:e,encoding:{x:{field:a(t),type:a(n)},y:{field:a(i),type:a(o)}},config:{background:"white"}};if(arguments.length>6){if(void 0===s)throw new Error("undefined not a valid key, use 'undefined' if necessary");v.encoding[s]={field:a(h),type:a(f)}}return v=L2.aux.fromJSON(JSON.stringify(v)),v.v[v.rk.data]=new L2.Box(L2.sc.pair("values",new L2.Box(r))),v},typeL2:function(r){var e=typeof r;if("object"!==e)return e;if(r instanceof Date)return"date";if(r instanceof RegExp)return"regex";if(r instanceof L2.Box)return"box";throw new Error("not an L2 type")},isEmpty:function(r){if("object"!=typeof r)return!0;for(var e in r)return!1;return!0},uniqueJSA:function(r){for(var e=1,t=r.length;t>e;e++)for(var n=0;e>n;n++)if(r[e]===r[n])return!1;return!0},mutExProps:function(r,e){for(var t in e)if(t in r)return!1;return!0},keyValFlip:function(r){var e={};for(var t in r)e[r[t]]=t;return e},boxCopy:function(r){if(r instanceof L2.Box)return new L2.Box(new L2.ArCopy(r._contents_,!0,"deep"));throw new Error("cannot copy a scalar unless it is a box")},shuffle:function(r){var e,t=new Array(r);t[0]=0;for(var n=1;r>n;n++)e=Math.floor(Math.random()*(n+1)),t[n]=t[e],t[e]=n;return t},mod:function(r,e){return(r%e+e)%e},validSfx:function(r,e){if(r=String(r).toLowerCase(),"r"===r||"c"===r||"p"===r||"e"===r&&e)return r;throw new Error("invalid suffix")},emptyToNull:function(r){var e=function(r,e,t,n,i,o){return o||i?",null":e||t?"null,null":void 0!==n?"null":r};return r.replace(/"[^"\\]*(?:\\.[^"\\]*)*"|(^\s*,\s*$)|(^\s*,\s*(?=,))|(^\s*(?=,))|(,\s*$)|(,\s*(?=,))/gm,e)},exportStringCSV:function(r){return'"'+r.replace(/\\/g,"\\\\").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\"/g,'\\"')+'"'},jsc:function(r){return console.log(r),r},basicType:function(r){var e=typeof r;return"string"===e||"number"===e||"boolean"===e||"undefined"===e?r:String(r)},ternary:function(r,e,t){var n,i,o,s,h,f=1,a=1,v=1;if(i=e instanceof L2.Ar,i&&(a=e.v.length,1===a&&(e=e.v[0],i=void 0)),o=t instanceof L2.Ar,o&&(v=t.v.length,1===v&&(t=t.v[0],o=void 0)),n=r instanceof L2.Ar,n&&(f=r.v.length,1!==f||1===a&&1===v||(r=r.v[0],n=void 0)),n&&i&&(r.r!==e.r||r.c!==e.c||r.p!==e.p))throw new Error("shape mismatch");if(n&&o&&(r.r!==t.r||r.c!==t.c||r.p!==t.p))throw new Error("shape mismatch");if(i&&o&&(e.r!==t.r||e.c!==t.c||e.p!==t.p))throw new Error("shape mismatch");if(n)if(s=new L2.ArShell(r),s.v=new Array(s.r*s.c*s.p),i)if(o)for(h=0;f>h;h++)s.v[h]=r.v[h]?e.v[h]:t.v[h];else for(h=0;f>h;h++)s.v[h]=r.v[h]?e.v[h]:t;else if(o)for(h=0;f>h;h++)s.v[h]=r.v[h]?e:t.v[h];else for(h=0;f>h;h++)s.v[h]=r.v[h]?e:t;else if(i)if(s=new L2.ArSh(new L2.ArToSh(e),void 0,!0),o)for(h=0;a>h;h++)s.v[h]=r?e.v[h]:t.v[h];else for(h=0;a>h;h++)s.v[h]=r?e.v[h]:t;else if(o)for(s=new L2.ArSh(new L2.ArToSh(t),void 0,!0),h=0;v>h;h++)s.v[h]=r?e:t.v[h];else s=new L2.ArJSA([r?e:t]);return s},ternarySca:function(r,e,t){return r?e:t},tpSca:function(r,e){if(void 0!==e&&(e=e.toLowerCase(),"rcp"!==e&&"rpc"!==e&&"crp"!==e&&"cpr"!==e&&"prc"!==e&&"pcr"!==e))throw new Error("invalid permutation");return new L2.ArJSA([r])},testError:function(r,e){try{r()}catch(t){if(t.message!==e)throw new Error("unexpected error message");return}throw new Error("expected error, but none thrown")},specChar:function(r){var e={"&":"&amp;",";":"&semi;","<":"&lt;"," ":"&nbsp;","\n":"<br>","	":"&nbsp;&nbsp;"};return r.replace(/[&;< \n\t]/g,function(r){return e[r]})},fromJSON:function(r){function e(r){var t,n,i,o,s,h,f;if(Array.isArray(r)){for(s=r.length,L2.assert.maxEnt(s),i=new Array(s),t=0;s>t;t++)h=r[t],i[t]=null===h?void 0:"object"==typeof h?new L2.Box(e(h)):h;return new L2.ArJSA(i)}if("object"==typeof r){i=[],o={},n=0;for(t in r)h=r[t],i[n]=null===h?void 0:"object"==typeof h?new L2.Box(e(h)):h,o[t]=n++;return L2.assert.maxEnt(i.length),f=new L2.ArJSA(i),f.z=!0,f.rk=o,f}throw new Error("argument must be an object or array")}return e(JSON.parse(r))},openIfBox:function(r){return r instanceof L2.Box?r._contents_:new L2.ArJSA([r])}},L2.fromJS=function(r){var e,t,n,i,o,s,h,f;if(Array.isArray(r)){for(o=r.length,L2.assert.maxEnt(o),n=new Array(o),e=0;o>e;e++)if(s=r[e],h=typeof s,"number"===h||"string"===h||"boolean"===h)n[e]=s;else{if(void 0===s||null===s)continue;"function"===h||s instanceof Date||s instanceof RegExp?n[e]=s.toString():n[e]=new L2.Box(L2.fromJS(s))}return new L2.ArJSA(n)}if("object"==typeof r){n=[],i={},t=0;for(e in r)s=r[e],h=typeof s,"number"===h||"string"===h||"boolean"===h?n[t]=s:void 0===s||null===s?n[t]=void 0:"function"===h||s instanceof Date||s instanceof RegExp?n[t]=s.toString():n[t]=new L2.Box(L2.fromJS(s)),i[e]=t++;return L2.assert.maxEnt(n.length),f=new L2.ArJSA(n),f.z=!0,f.rk=i,f}throw new Error("argument must be an object or array")},L2.toJS=function(r){var e,t,n,i,o;if(r.rk&&1===r.c&&1===r.p){n={};for(e in r.rk)i=r.v[r.rk[e]],o=typeof i,"number"===o||"string"===o||"boolean"===o?n[e]=i:void 0===i?n[e]=null:i instanceof L2.Box?n[e]=L2.toJS(i._contents_):n[e]=i.toString()}else for(t=r.v.length,n=new Array(t),e=0;t>e;e++)i=r.v[e],o=typeof i,"number"===o||"string"===o||"boolean"===o?n[e]=i:void 0===i?n[e]=null:i instanceof L2.Box?n[e]=L2.toJS(i._contents_):n[e]=i.toString();return n},L2.pf={math:{"^":Math.pow,"^^":function(r,e){return r*Math.pow(10,e)},"><":Math.max,"<>":Math.min,"%%":L2.aux.mod},noArg:{tic:function(){return L2.aux.ticGo="br"===L2.runningIn||"wp"===L2.runningIn?performance.now():process.hrtime(),0},toc:function(){if("br"===L2.runningIn||"wp"===L2.runningIn)return Math.round(performance.now()-L2.aux.ticGo);var r=process.hrtime(L2.aux.ticGo);return Math.round((1e9*r[0]+r[1])/1e6)},wd:function(){return L2.assert.node(),process.cwd()}},ew:{js:function(r){return L2.compile(String(r))},sqrt:Math.sqrt,abs:Math.abs,round:Math.round,floor:Math.floor,ceil:Math.ceil,exp:Math.exp,log:Math.log,log10:function(r){return Math.log(r)/Math.LN10},log2:function(r){return Math.log(r)/Math.LN2},sin:Math.sin,cos:Math.cos,tan:Math.tan,iSin:Math.asin,iCos:Math.acos,iTan:Math.atan,fac:function(r){if(L2.assert.nonNegInt(r),1>=r)return 1;for(var e=Number(r);r>2;)e*=--r;return e},num:Number,str:String,bool:Boolean,date:function(r){return new Date(r)},isNum:function(r){return"number"==typeof r},isInt:function(r){return Math.round(r)===r&&isFinite(r)},isFin:function(r){return"number"==typeof r&&isFinite(r)},isNaN:function(r){return"number"==typeof r&&isNaN(r)},isStr:function(r){return"string"==typeof r},isBool:function(r){return"boolean"==typeof r},isFunc:function(r){return"function"==typeof r},isReg:function(r){return r instanceof RegExp},isDate:function(r){return r instanceof Date},isBox:function(r){return r instanceof L2.Box},isFile:function(r){L2.assert.node();try{return L2.node_fs.statSync(L2.aux.absPath(r)).isFile()}catch(e){return!1}},isDir:function(r){L2.assert.node();try{return L2.node_fs.statSync(L2.aux.absPath(r)).isDirectory()}catch(e){return!1}},type:L2.aux.typeL2,unbox:function(r){return r instanceof L2.Box?r._contents_.v[0]:r},box:function(r){return r instanceof L2.Box?r:new L2.Box(new L2.ArJSA([r]))}},reg:function(r,e){if(void 0!==e){if(/[^gim]/.test(e))throw new Error("invalid flag");return new RegExp(r,e)}return new RegExp(r)}},L2.ge={},L2.ge.isBasic=function(r){return!(r instanceof L2.Ar||r instanceof L2.Box)},L2.ge.isBasic.sig={arg:[3],rtn:!1,min:1},L2.ge.isNil=function(r){return void 0===r||r instanceof L2.Ar&&1===r.v.length&&void 0===r.v[0]},L2.ge.isNil.sig={arg:[3],rtn:!1,min:1},L2.ge.isVec=function(r){return!(r instanceof L2.Ar)||1===r.c&&1===r.p},L2.ge.isVec.sig={arg:[3],rtn:!1,min:1},L2.ge.isMat=function(r){return!(r instanceof L2.Ar&&1!==r.p)},L2.ge.isMat.sig={arg:[3],rtn:!1,min:1},L2.ge.isDict=function(r){return!!(r instanceof L2.Ar&&r.rk&&1===r.c&&1===r.p)},L2.ge.isDict.sig={arg:[3],rtn:!1,min:1},L2.ge.error=function(r){var e=new Error(r instanceof L2.Ar?r.v[0]:r);throw e._user_=!0,e},L2.ge.error.sig={arg:[3],rtn:!1,min:0},L2.ge.equal=function(r,e){var t,n,i,o,s,h,f;if(h=["r","c","p"],r instanceof L2.Ar){if(!(e instanceof L2.Ar))return!1;if(r.r!==e.r||r.c!==e.c||r.p!==e.p)return!1;if(r.z||e.z){for(i=0;3>i;i++){if(f=h[i]+"k",o=r[f],s=e[f],!!o!=!!s)return!1;if(o)for(t in o)if(o[t]!==s[t])return!1}if(!!r.e!=!!e.e)return!1;if(r.e&&(r.e.t!==e.e.t||r.e.i!==e.e.i||r.e.rl!==e.e.rl||r.e.cl!==e.e.cl||r.e.pl!==e.e.pl||!!r.e.rf!=!!e.e.rf||!!r.e.cf!=!!e.e.cf||!!r.e.pf!=!!e.e.pf||!!r.e.ef!=!!e.e.ef))return!1}for(t=0,n=r.v.length;n>t;t++)if(r.v[t]instanceof L2.Box){if(!(e.v[t]instanceof L2.Box&&L2.ge.equal(r.v[t]._contents_,e.v[t]._contents_)))return!1}else if(r.v[t]!==e.v[t])return!1}else{if(e instanceof L2.Ar)return!1;if(r instanceof L2.Box){if(!(e instanceof L2.Box&&L2.ge.equal(r._contents_,e._contents_)))return!1}else if(r!==e)return!1}return!0},L2.ge.equal.sig={arg:[3,3],rtn:!1,min:2},L2.ge.assert=function(r,e){var t,n,i,o,s,h,f;if(h=["r","c","p"],r instanceof L2.Ar){if(!(e instanceof L2.Ar))throw new Error("(assert) table and scalar");if(r.r!==e.r)throw new Error("(assert) number of rows not equal");if(r.c!==e.c)throw new Error("(assert) number of columns not equal");if(r.p!==e.p)throw new Error("(assert) number of pages not equal");if(r.z||e.z){for(i=0;3>i;i++){if(f=h[i]+"k",o=r[f],s=e[f],!!o!=!!s)throw new Error("(assert) only one argument has "+L2.aux.expandDim[h[i]]+" keys");if(o)for(t in o)if(o[t]!==s[t])throw new Error("(assert) "+L2.aux.expandDim[h[i]]+" keys not equal or not in same order")}if(!!r.e!=!!e.e)throw new Error("(assert) only one argument has a non-keys extra");if(r.e){if(r.e.t!==e.e.t)throw new Error("(assert) titles not equal");if(r.e.i!==e.e.i)throw new Error("(assert) info not equal");if(r.e.rl!==e.e.rl)throw new Error("(assert) row labels not equal");if(r.e.cl!==e.e.cl)throw new Error("(assert) column labels not equal");if(r.e.pl!==e.e.pl)throw new Error("(assert) page labels not equal");if(!!r.e.rf!=!!e.e.rf)throw new Error("(assert) only one argument has row key formatting");if(!!r.e.cf!=!!e.e.cf)throw new Error("(assert) only one argument has column key formatting");if(!!r.e.pf!=!!e.e.pf)throw new Error("(assert) only one argument has page key formatting");if(!!r.e.ef!=!!e.e.ef)throw new Error("(assert) only one argument has entry formatting")}}for(t=0,n=r.v.length;n>t;t++)if(r.v[t]instanceof L2.Box){if(!(e.v[t]instanceof L2.Box&&L2.ge.equal(r.v[t]._contents_,e.v[t]._contents_)))throw new Error("(assert) entries at index "+t+" not equal")}else if(r.v[t]!==e.v[t])throw new Error("(assert) entries at index "+t+" not equal")}else{if(e instanceof L2.Ar)throw new Error("(assert) scalar and table");if(r instanceof L2.Box){if(!(e instanceof L2.Box&&L2.ge.equal(r._contents_,e._contents_)))throw new Error("(assert) scalars not equal")}else if(r!==e)throw new Error("(assert) scalars not equal")}return!0},L2.ge.assert.sig={arg:[3,3],rtn:!1,min:2},L2.ge.req=function(r,e){var t;if("br"===L2.runningIn)throw new Error("cannot require files in browser version of L2");if(2===arguments.length&&(e instanceof L2.Ar&&(e=e.v[0]),"reload"!==e))throw new Error("argument must be 'reload'");r instanceof L2.Ar&&(r=r.v[0]);var n=r.slice(-3).toUpperCase();if(".JS"!==n&&".L2"!==n)throw new Error("path must end in '.js' or '.L2'");if("wp"===L2.runningIn){if(e)throw new Error("'reload' argument cannot be used in an HTML document");if(".JS"!==n)throw new Error("must require .js file in an HTML document");t=L2.modules.loaded[r]}else{var i="nd"===L2.runningIn?require:global.require,o=L2.aux.absPath(".JS"===n?r:r.slice(0,-3)+".js"),s=!!i.cache[o];!e&&s||".L2"===n&&L2.aux.L2_JS(L2.aux.absPath(r)),e&&s&&delete i.cache[o],t=i(o)}if(t instanceof L2.Ar)return t;throw new Error("not an L2 module")},L2.ge.req.sig={arg:[3,3],rtn:!0,min:1},L2.ge.cd=function(r){return L2.assert.node(),process.chdir(L2.aux.absPath(r instanceof L2.Ar?r.v[0]:r)),process.cwd()},L2.ge.cd.sig={arg:[3],rtn:!1,min:1},L2.ge["delete"]=function(r){if(L2.assert.node(),r instanceof L2.Ar)for(var e=0;e<r.v.length;e++)L2.node_fs.unlinkSync(L2.aux.absPath(r.v[e]));else L2.node_fs.unlinkSync(L2.aux.absPath(r));return!0},L2.ge["delete"].sig={arg:[3],rtn:!1,min:1},L2.sc={},L2.sc.apnd=function(r,e,t){var n=new L2.ArJSA([e,t]);return"c"===r?(n.r=1,n.c=2):"p"===r&&(n.r=1,n.p=2),n},L2.sc.range=function(r,e,t,n,i){var o,s,h,f,a,v,u=typeof r;if(typeof e!==u)throw new Error("first two arguments must be same type");if("number"===u){if(!isFinite(r)||!isFinite(e))throw new Error("start or end not finite");if(void 0===t)t=1;else if(t=Number(Number(t).toFixed(14)),0===t||!isFinite(t))throw new Error("invalid step size");if(r=Number(r.toFixed(14)),e=Number(e.toFixed(14)),e>r&&0>t||r>e&&t>0)throw new Error("stepping in wrong direction");for(s=Math.floor(Math.abs((e-r)/t).toFixed(14))+1,L2.assert.maxEnt(s),h=new L2.Ar(s,void 0,!0),o=0;s>o;o++)h.v[o]=r+o*t}else{if(void 0===t)t=1;else if(t=Number(t),Math.round(t)!==t||0===t||!isFinite(t))throw new Error("invalid step size");if("string"===u){if(r=L2.aux.lettersJSO[r],e=L2.aux.lettersJSO[e],void 0===r||void 0===e)throw new Error("start or end not a letter");if(e>r&&0>t||r>e&&t>0)throw new Error("stepping in wrong direction");for(s=Math.floor(Math.abs((e-r)/t))+1,h=new L2.Ar(s,void 0,!0),o=0;s>o;o++)h.v[o]=L2.aux.lettersJSA[r+o*t]}else{if(!(r instanceof Date))throw new Error("first argument must be number, string or date");if(a=r.getTime(),v=e.getTime(),!isFinite(a)||!isFinite(v))throw new Error("start or end invalid");if(f=[],r=new Date(r),v>a){if(0>t)throw new Error("stepping in wrong direction");do f.push(r),r=r.addDate(t,n,i);while(r.getTime()<=v)}else if(a>v){if(t>0)throw new Error("stepping in wrong direction");do f.push(r),r=r.addDate(t,n,i);while(r.getTime()>=v)}else f.push(r);h=new L2.ArJSA(f)}}return h},L2.sc.pair=function(r,e){if(void 0===r)throw new Error("undefined not a valid key, use 'undefined' if necessary");var t=new L2.ArJSA([e]);return t.rk={},t.rk[r]=0,t.z=!0,t},L2.sc.pairNone=function(){var r=new L2.ArJSA([]);return r.rk={},r.z=!0,r},L2.sc.pairMult=function(){var r,e=arguments.length;if(1===e){if(r=arguments[0].v,e=r.length,e%2===1)throw new Error("odd number of entries")}else r=arguments;L2.assert.maxEnt(e/2);var t,n,i,o=0,s=new Array(e/2),h=new Array(e/2);for(n=1;e>n;n+=2)s[o++]=r[n];for(i=new L2.ArJSA(s),i.rk={},o=0,n=0;e>n;n+=2){if(t=r[n],void 0===t)throw new Error("undefined not a valid key, use 'undefined' if necessary");h[o]=t=String(t),i.rk[t]=o++}if(!L2.aux.uniqueJSA(h))throw new Error("keys not unique");return i.z=!0,i},L2.sc.loadCSV=function(r,e,t){var n,i,o,s,h,f,a,v,u,c,l,w,p,L,d,g,m;if(2===arguments.length)if("name"===e)o=!0;else{if("miss"!==e)throw new Error("argument must be 'name' or 'miss'");s=!0}else if(3===arguments.length){if(!("name"===e&&"miss"===t||"miss"===e&&"name"===t))throw new Error("arguments must be 'name' and 'miss'");o=!0,s=!0}if(i=L2.sc.read(r),""===i.trim())throw new Error("no data in file\n"+r);for(s&&(i=L2.aux.emptyToNull(i)),n=i.split("\n");0===n[n.length-1].trim().length;)n.pop();try{a=JSON.parse("["+n[0]+"]")}catch(A){throw new Error("invalid data\n"+r+":1")}for(v=a.length,h=n.length,f=o?h-1:h,p=f*v,L2.assert.maxEnt(p),L=new Array(p),l=0,c=o?1:0;h>c;c++,l++){try{m=0===c?a:JSON.parse("["+n[c]+"]")}catch(A){throw new Error("invalid data\n"+r+":"+(c+1))}if(m.length!==v)throw new Error("wrong number of fields\n"+r+":"+(c+1));for(w=0;v>w;w++){if(d=m[w],g=typeof d,null===d)d=void 0;else if("number"!==g&&"boolean"!==g&&"string"!==g)throw new Error("invalid type - must be number, string or boolean\n"+r+":"+(c+1));L[l+f*w]=d}}if(u=new L2.ArJSA(L),u.r=f,u.c=v,o){for(c=0;v>c;c++)if(g=typeof a[c],"number"!==g&&"boolean"!==g&&"string"!==g)throw new Error("invalid key\n"+r+":1");u["key:"]("c",void 0,new L2.ArJSA(a))}return u},L2.sc.load=function(r){if(".L2T"!==r.slice(-4).toUpperCase())throw new Error("file extension must be '.L2T'");return L2.sc.fromStr(L2.sc.read(r))},L2.sc.fromStr=function(r){for(var e=JSON.parse(r),t=0,n=e.v.length;n>t;t++)null===e.v[t]&&(e.v[t]=void 0);return new L2.ArCopy(e,!0)},L2.sc._dPush=function(r,e,t){if(r instanceof L2.Box)return r._contents_._dPush(e,t);throw new Error("dictionary expected")},L2.sc._dEnt=function(r,e){if(r instanceof L2.Box)return r._contents_._dEnt(e);throw new Error("dictionary expected")},L2.sc.read=function(r){return L2.assert.node(),L2.node_fs.readFileSync(L2.aux.absPath(r),"utf8")},L2.sc.write=function(r,e,t){if(L2.assert.node(),3===arguments.length){if("append"!==t)throw new Error("argument must be 'append'");L2.node_fs.appendFileSync(L2.aux.absPath(e),r)}else L2.node_fs.writeFileSync(L2.aux.absPath(e),r);return!0},L2.sc.readLine=function(r,e){L2.assert.node(),L2.assert.func(e);for(var t,n,i="",o=0,s=0,h=new L2.node_stringdecode("utf8"),f=16384,a=new Buffer(f),v=-1,u=!1,c=!0,l=!0,w=L2.node_fs.openSync(r,"r");c;){for(l=!0;l;)v=i.indexOf("\n",o),-1!==v?(s=v,l=!1):u?(s=i.length,l=!1):(t=L2.node_fs.readSync(w,a,0,f,null),u=t!==f,i+=h.write(a.slice(0,t)));o<i.length?(e(i.substring(o,s+1)),o=s+1,o>=f&&(n=o/f,i=i.substring(f),o-=f,s-=f)):c=!1}L2.node_fs.closeSync(w)},L2.sc.stream=function(r,e){L2.assert.node(),L2.assert.func(e);var t=L2.node_fs.createReadStream(r),n=L2.node_concat(function(r){e(r.toString())});".gz"===r.slice(-3)?t.pipe(L2.node_zlib.createGunzip()).pipe(n):t.pipe(n)},L2.sc.streamChunk=function(r,e,t,n){L2.assert.node(),L2.assert.func(t);var i,o,s;i=L2.node_fs.createReadStream(r),s=L2.node_es.split(e),".gz"===r.slice(-3)&&(o=L2.node_zlib.createGunzip()),void 0===n?n=function(){}:L2.assert.func(n),o?i.pipe(o).pipe(s).pipe(L2.node_es.through(t,n)):i.pipe(s).pipe(L2.node_es.through(t,n))},L2.sc.http=function(r,e,t,n){L2.assert.node(),L2.assert.func(e);var i=L2.node_concat(function(r){e(r.toString())});".gz"===r.slice(-3)?L2.node_request.get(r).auth(String(t),String(n),!1).pipe(L2.node_zlib.createGunzip()).pipe(i):L2.node_request.get(r).auth(String(t),String(n),!1).pipe(i)},L2.sc.httpChunk=function(r,e,t,n,i,o){L2.assert.node(),L2.assert.func(t),void 0===n?n=function(){}:L2.assert.func(n);var s=L2.node_es.split(e);".gz"===r.slice(-3)?L2.node_request.get(r).auth(String(i),String(o),!1).pipe(L2.node_zlib.createGunzip()).pipe(s).pipe(L2.node_es.through(t,n)):L2.node_request.get(r).auth(String(i),String(o),!1).pipe(s).pipe(L2.node_es.through(t,n))},L2.sc.httpBasic=function(r,e,t,n){L2.assert.node(),L2.assert.func(e),L2.node_request.get(r,function(r,t,n){if(r)throw r;if(200!=t.statusCode)throw new Error("status code: "+t.statusCode+", message: "+t.statusMessage);e(n)}).auth(String(t),String(n),!1)},L2.sc.httpGet=function(r,e,t,n,i){L2.assert.node(),void 0===t?t=function(){}:L2.assert.func(t),L2.node_request.get(r).auth(String(n),String(i),!1).pipe(L2.node_fs.createWriteStream(e)).on("finish",t)},L2.sc.gzip=function(r,e,t,n){L2.assert.node(),void 0===n?n=function(){}:L2.assert.func(n),L2.node_fs.createReadStream(e).pipe(L2.node_zlib[r?"createGunzip":"createGzip"]()).pipe(L2.node_fs.createWriteStream(t)).on("finish",n)},L2.sc.ls=function(r){return L2.assert.node(),r=arguments.length?L2.aux.absPath(r):process.cwd(),new L2.ArJSA(L2.node_fs.readdirSync(r))},L2.sc.about=function(r){L2.assert.node(),r=arguments.length?L2.aux.absPath(r):process.cwd();var e,t,n,i,o,s=L2.node_fs.readdirSync(r),h=s.length,f=new L2.ArSh(new L2.ArJSA([h,6,1]),void 0,!0);for(f["key:"]("c",void 0,new L2.ArJSA(["base","ext","byte","item","mod","born"])),f["key:"]("r",void 0,new L2.ArJSA(s)),i=0;h>i;i++){o=i,n=r+"/"+s[i],t=L2.node_path.extname(n),f.v[o]=L2.node_path.basename(n,t),f.v[o+=h]=t;try{e=L2.node_fs.statSync(n),f.v[o+=h]=e.size,f.v[o+=h]=e.isFile()?"file":e.isDirectory()?"dir":"other",f.v[o+=h]=e.mtime,f.v[o+=h]=e.birthtime}catch(a){}}return f},L2.sc.unwrap=function(r){if(r instanceof L2.Box)return r._contents_;throw new Error("box expected")},L2.Box=function(r){this._contents_=r},L2.Box.prototype.toString=function(){return"box"},L2.Ar=function(r,e,t){if(t||(r=Number(r),L2.assert.nonNegInt(r),L2.assert.maxEnt(r)),this.v=new Array(r),void 0!==e)for(var n=0;r>n;n++)this.v[n]=e;this.r=r,this.c=this.p=1,this.z=!1},L2.ArSh=function(r,e,t){var n=r.v.length;t||L2.assert.validShAr(r),this.r=Number(r.v[0]),n>1?(this.c=Number(r.v[1]),n>2?this.p=Number(r.v[2]):this.p=1):this.c=this.p=1;var i=this.r*this.c*this.p;if(this.v=new Array(i),void 0!==e)for(var o=0;i>o;o++)this.v[o]=e;this.z=!1},L2.ArSh.prototype=L2.Ar.prototype,L2.ArFast=function(r,e,t){this.v=new Array(r*e*t),this.r=r,this.c=e,this.p=t,this.z=!1},L2.ArFast.prototype=L2.Ar.prototype,L2.ArJSA=function(r){this.v=r,this.r=r.length,this.c=this.p=1,this.z=!1},L2.ArJSA.prototype=L2.Ar.prototype,L2.ArToSh=function(r){this.v=[r.r,r.c,r.p],this.r=3,this.c=this.p=1,this.z=!1},L2.ArToSh.prototype=L2.Ar.prototype,L2.ArTp=function(r,e){var t;if(void 0!==e){if(e=e.toLowerCase(),"rcp"!==e&&"rpc"!==e&&"crp"!==e&&"cpr"!==e&&"prc"!==e&&"pcr"!==e)throw new Error("invalid permutation")}else e="crp";var n=e[0],i=e[1],o=e[2];if(this.r=r[n],this.c=r[i],this.p=r[o],r.z){if(r.e&&(this.e={},r.e.t&&(this.e.t=r.e.t),r.e.i&&(this.e.i=r.e.i),r.e[n+"l"]&&(this.e.rl=r.e[n+"l"]),r.e[i+"l"]&&(this.e.cl=r.e[i+"l"]),r.e[o+"l"]&&(this.e.pl=r.e[o+"l"]),r.e.ef&&(this.e.ef=r.e.ef),r.e[n+"f"]&&(this.e.rf=r.e[n+"f"]),r.e[i+"f"]&&(this.e.cf=r.e[i+"f"]),r.e[o+"f"]&&(this.e.pf=r.e[o+"f"])),t=r[n+"k"]){this.rk={};for(l in t)this.rk[l]=t[l]}if(t=r[i+"k"]){this.ck={};for(l in t)this.ck[l]=t[l]}if(t=r[o+"k"]){this.pk={};for(l in t)this.pk[l]=t[l]}this.z=!0}else this.z=!1;this.v=new Array(r.v.length);for(var s={r:1,c:r.r,p:r.r*r.c},h=s[n],f=s[i],a=s[o],v=0,u=0;u<r[o];u++)for(var c=0;c<r[i];c++)for(var l=0;l<r[n];l++)this.v[v++]=r.v[l*h+c*f+u*a]},L2.ArTp.prototype=L2.Ar.prototype,L2.ArSc=function(r){this.v=[r],this.r=this.c=this.p=1,this.z=!1},L2.ArSc.prototype=L2.Ar.prototype,L2.ArCopy=function(r,e,t){if(arguments.length>=3&&"deep"!==t)throw new Error("argument must be 'deep'");var n;if(this.r=r.r,this.c=r.c,this.p=r.p,e&&r.z){if(r.e){this.e={};for(n in r.e)this.e[n]=r.e[n]}if(r.rk){this.rk={};for(n in r.rk)this.rk[n]=r.rk[n]}if(r.ck){this.ck={};for(n in r.ck)this.ck[n]=r.ck[n]}if(r.pk){this.pk={};for(n in r.pk)this.pk[n]=r.pk[n]}this.z=!0}else this.z=!1;var i=r.v.length;if(this.v=new Array(i),t)for(n=0;i>n;n++)r.v[n]instanceof L2.Box?this.v[n]=new L2.Box(new L2.ArCopy(r.v[n]._contents_,!0,"deep")):this.v[n]=r.v[n];else for(n=0;i>n;n++)this.v[n]=r.v[n]},L2.ArCopy.prototype=L2.Ar.prototype,L2.ArShell=function(r,e){var t;if(this.r=r.r,this.c=r.c,this.p=r.p,r.z){if(r.e){this.e={};for(t in r.e)this.e[t]=r.e[t]}if(r.rk&&"r"!==e){this.rk={};for(t in r.rk)this.rk[t]=r.rk[t]}if(r.ck&&"c"!==e){this.ck={};for(t in r.ck)this.ck[t]=r.ck[t]}if(r.pk&&"p"!==e){this.pk={};for(t in r.pk)this.pk[t]=r.pk[t]}this.z=!0}else this.z=!1},L2.ArShell.prototype=L2.Ar.prototype,L2.P=L2.Ar.prototype,L2.P["title:"]=function(r){if(void 0===r)this.e&&(delete this.e.t,L2.aux.isEmpty(this.e)&&delete this.e);else{if(r=String(r),""===r)throw new Error("empty string not permitted");this.e=this.e||{},this.e.t=r,this.z=!0}return this},L2.P["title:"].sig={arg:[1],rtn:!0,min:1,dim:0},L2.P.title=function(){return this.e?this.e.t:void 0},L2.P.title.sig={arg:[],rtn:!1,min:0,dim:0},L2.P["info:"]=function(r){if(void 0===r)this.e&&(delete this.e.i,L2.aux.isEmpty(this.e)&&delete this.e);else{if(r=String(r),""===r)throw new Error("empty string not permitted");this.e=this.e||{},this.e.i=r,this.z=!0}return this},L2.P["info:"].sig={arg:[1],rtn:!0,min:1,dim:0},L2.P.info=function(){return this.e?this.e.i:void 0},L2.P.info.sig={arg:[],rtn:!1,min:0,dim:0},L2.P["fmt:"]=function(r,e){if(void 0===e)this.e&&(delete this.e[r+"f"],L2.aux.isEmpty(this.e)&&delete this.e);else{if("function"!=typeof e)throw new Error("function expected");this.e=this.e||{},this.e[r+"f"]=function(r){return L2.sca(e(r))},this.z=!0}return this},L2.P["fmt:"].sig={arg:[1],rtn:!0,min:1,dim:2},L2.P.fmt=function(r){return this.e?this.e[r+"f"]:void 0},L2.P.fmt.sig={arg:[],rtn:!1,min:0,dim:2},L2.P["label:"]=function(r,e){if(void 0===e)this.e&&(delete this.e[r+"l"],L2.aux.isEmpty(this.e)&&delete this.e);else{if(e=String(e),""===e)throw new Error("empty string not permitted");this.e=this.e||{},this.e[r+"l"]=e,this.z=!0}return this},L2.P["label:"].sig={arg:[1],rtn:!0,min:1,dim:1},L2.P.label=function(r){return this.e?this.e[r+"l"]:void 0},L2.P.label.sig={arg:[],rtn:!1,min:0,dim:1},L2.P["key:"]=function(r,e,t){var n,i,o,s,h,f,a,v,u,c=L2.ge.isNil(e);if(L2.ge.isNil(t)){if(!c)throw new Error("invalid combination of arguments");delete this[r+"k"]}else if(c){if(t instanceof L2.Ar){if(t.v.length!==this[r])throw new Error("number of keys not equal to number of "+L2.aux.expandDim[r]+"s");if(0===this[r])this[r+"k"]={};else{for(h=t.v.length,i={},o=new Array(h),s=0;h>s;s++){if(n=t.v[s],void 0===n)throw new Error("undefined not a valid key, use 'undefined' if necessary");o[s]=n=String(n),i[n]=s}if(!L2.aux.uniqueJSA(o))throw new Error("keys not unique");this[r+"k"]=i}}else{if(1!==this[r])throw new Error("number of keys not equal to number of "+L2.aux.expandDim[r]+"s");i={},i[t]=0,this[r+"k"]=i}this.z=!0}else{if(i=this[r+"k"],!i)throw new Error("table has no "+L2.aux.expandDim[r]+" keys");if(e instanceof L2.Ar&&(f=e.v.length),void 0===f||1===f){if(e=String(f?e.v[0]:e),t instanceof L2.Ar){if(1!==t.v.length)throw new Error("last two arguments do not have same number of entries");t=String(t.v[0])}else t=String(t);if("number"!=typeof i[e])throw new Error("key does not exist");if(e===t)return this;if("number"==typeof i[t])throw new Error("will result in duplicate key");i[t]=i[e],delete i[e]}else{if(v={},u={},t instanceof L2.Ar&&(a=t.v.length),f!==a)throw new Error("last two arguments do not have same number of entries");if(0===a)return this;for(s in i)v[s]=i[s];for(s=0;f>s;s++){if(void 0===e.v[s]||void 0===t.v[s])throw new Error("undefined not a valid key, use 'undefined' if necessary");if(u[t.v[s]]=n=v[e.v[s]],"number"!=typeof n)throw new Error("key does not exist or duplicate in keys to change");delete v[e.v[s]]}for(s=0;f>s;s++){if("number"==typeof v[t.v[s]])throw new Error("will result in duplicate key");v[t.v[s]]=u[t.v[s]]}this[r+"k"]=v}}return this},L2.P["key:"].sig={arg:[3,3],rtn:!0,min:1,dim:1},L2.P.key=function(r){var e=this[r+"k"];if(e){var t=new Array(this[r]);for(var n in e)t[e[n]]=n;return new L2.ArJSA(t)}return new L2.ArJSA([void 0])},L2.P.key.sig={arg:[],rtn:!0,min:0,dim:1},L2.P["extra:"]=function(r){if(void 0!==r)throw new Error("must pass undefined as second argument");return this.z&&(delete this.rk,delete this.ck,delete this.pk,delete this.e,this.z=!1),this},L2.P["extra:"].sig={arg:[1],rtn:!0,min:1,dim:0},L2.P.extra=function(r){throw new Error("setter operator only, ':' required")},L2.P.extra.sig={arg:[1],rtn:!0,min:1,dim:0},L2.P.morph=function(r){var e,t,n=new L2.ArCopy(this,!1),i=n.v.length;if(r instanceof L2.Ar){if(e=r.v.length,t=L2.assert.validShAr(r),t!==i)throw new Error("number of entries cannot change");n.r=Number(r.v[0]),e>1?(n.c=Number(r.v[1]),e>2?n.p=Number(r.v[2]):n.p=1):n.c=n.p=1}else{if(i!=r)throw new Error("number of entries cannot change");
n.r=i,n.c=n.p=1}return n},L2.P.morph.sig={arg:[3],rtn:!0,min:1,dim:0},L2.P.sqz=function(){var r,e=new L2.ArCopy(this,!0),t="",n="";return 1!==this.r?n+="r":t+="r",1!==this.c?n+="c":t+="c",1!==this.p?n+="p":t+="p",r=n+t,"rcp"===r?e:new L2.ArTp(e,r)},L2.P.sqz.sig={arg:[],rtn:!0,min:0,dim:0},L2.P.flip=function(r){var e,t,n,i=new L2.ArShell(this),o=0,s=i.r*i.c,h=r+"k";if(i[h])for(e in this[h])i[h][e]=i[r]-this[h][e]-1;if(i.v=new Array(this.v.length),"r"===r)for(n=0;n<i.p;n++)for(t=0;t<i.c;t++)for(e=i.r-1;e>=0;e--)i.v[o++]=this.v[e+t*i.r+n*s];else if("c"===r)for(n=0;n<i.p;n++)for(t=i.c-1;t>=0;t--)for(e=0;e<i.r;e++)i.v[o++]=this.v[e+t*i.r+n*s];else for(n=i.p-1;n>=0;n--)for(t=0;t<i.c;t++)for(e=0;e<i.r;e++)i.v[o++]=this.v[e+t*i.r+n*s];return i},L2.P.flip.sig={arg:[],rtn:!0,min:0,dim:1},L2.P.shuf=function(r){var e,t,n,i,o=new L2.ArShell(this),s=0,h=o.r*o.c,f=r+"k",a=L2.aux.shuffle(o[r]);if(o[f]){for(i=new Array(o[r]),e=0;e<o[r];e++)i[a[e]]=e;for(e in this[f])o[f][e]=i[this[f][e]]}if(o.v=new Array(this.v.length),"r"===r)for(n=0;n<o.p;n++)for(t=0;t<o.c;t++)for(e=0;e<o.r;e++)o.v[s++]=this.v[a[e]+t*o.r+n*h];else if("c"===r)for(n=0;n<o.p;n++)for(t=0;t<o.c;t++)for(e=0;e<o.r;e++)o.v[s++]=this.v[e+a[t]*o.r+n*h];else for(n=0;n<o.p;n++)for(t=0;t<o.c;t++)for(e=0;e<o.r;e++)o.v[s++]=this.v[e+t*o.r+a[n]*h];return o},L2.P.shuf.sig={arg:[],rtn:!0,min:0,dim:1},L2.P.shift=function(r,e){if(void 0===e)e=1;else if(Math.round(e)!=e||!isFinite(e))throw new Error("integer expected");e=-Number(e);var t,n,i,o=new L2.ArShell(this),s=0,h=o.r*o.c,f=r+"k";if(o[f])for(t in this[f])o[f][t]=L2.aux.mod(this[f][t]-e,o[r]);if(o.v=new Array(this.v.length),"r"===r)for(i=0;i<o.p;i++)for(n=0;n<o.c;n++)for(t=0;t<o.r;t++)o.v[s++]=this.v[L2.aux.mod(t+e,o.r)+n*o.r+i*h];else if("c"===r)for(i=0;i<o.p;i++)for(n=0;n<o.c;n++)for(t=0;t<o.r;t++)o.v[s++]=this.v[t+L2.aux.mod(n+e,o.c)*o.r+i*h];else for(i=0;i<o.p;i++)for(n=0;n<o.c;n++)for(t=0;t<o.r;t++)o.v[s++]=this.v[t+n*o.r+L2.aux.mod(i+e,o.p)*h];return o},L2.P.shift.sig={arg:[1],rtn:!0,min:0,dim:1},L2.P.rep=function(r,e){if(e=void 0===e?2:Number(L2.assert.nonNegInt(e)),this[r+"k"])throw new Error("cannot repeat along dimension with keys");var t=this.v.length*e;L2.assert.maxEnt(t);var n=new L2.ArShell(this);n.v=new Array(t);var i,o,s,h,f=0,a=n.r*n.c;if("r"===r)for(s=0;s<n.p;s++)for(o=0;o<n.c;o++)for(h=0;e>h;h++)for(i=0;i<n.r;i++)n.v[f++]=this.v[i+o*n.r+s*a];else if("c"===r)for(s=0;s<n.p;s++)for(h=0;e>h;h++)for(o=0;o<n.c;o++)for(i=0;i<n.r;i++)n.v[f++]=this.v[i+o*n.r+s*a];else for(h=0;e>h;h++)for(s=0;s<n.p;s++)for(o=0;o<n.c;o++)for(i=0;i<n.r;i++)n.v[f++]=this.v[i+o*n.r+s*a];return n[r]*=e,n},L2.P.rep.sig={arg:[1],rtn:!0,min:0,dim:1},L2.P.to=function(r){var e;if(this.r!==r.r){if(1!==this.r)throw new Error("will only repeat along singleton dimensions");e=this.rep("r",r.r)}if(this.c!==r.c){if(1!==this.c)throw new Error("will only repeat along singleton dimensions");e=e?e.rep("c",r.c):this.rep("c",r.c)}if(this.p!==r.p){if(1!==this.p)throw new Error("will only repeat along singleton dimensions");e=e?e.rep("p",r.p):this.rep("p",r.p)}return e||(e=new L2.ArCopy(this,!0)),e},L2.P.to.sig={arg:[2],rtn:!0,min:1,dim:0},L2.P["slice:"]=function(r,e,t,n){if(e=this._getInd(e,r),void 0===t)t=e-1;else if(t=this._getInd(t,r),e>t)throw new Error("end index less than start index");if("r"===r&&(this.c!==n.c||this.p!==n.p)||"c"===r&&(this.r!==n.r||this.p!==n.p)||"p"===r&&(this.r!==n.r||this.c!==n.c))throw new Error("shape mismatch");var i,o,s,h,f,a,v,u=r+"k",c=0;if(0===e&&t===this[r]-1){if(this[u]){if(!n[u])throw new Error("second table has no "+L2.aux.expandDim[r]+" keys");f={};for(o in n[u])f[o]=n[u][o];this[u]=f}for(i=n.v.length,a=new Array(i),o=0;i>o;o++)a[o]=n.v[o];this.v=a,this[r]=n[r]}else{var l=t-e+1,w=this.r*this.c,p=n.r*n.c;if("r"===r)for(v=(this.r-l+n.r)*this.c*this.p,L2.assert.maxEnt(v),a=new Array(v),h=0;h<this.p;h++)for(s=0;s<this.c;s++){for(o=0;e>o;o++)a[c++]=this.v[o+s*this.r+h*w];for(o=0;o<n.r;o++)a[c++]=n.v[o+s*n.r+h*p];for(o=t+1;o<this.r;o++)a[c++]=this.v[o+s*this.r+h*w]}else if("c"===r)for(v=this.r*(this.c-l+n.c)*this.p,L2.assert.maxEnt(v),a=new Array(v),h=0;h<this.p;h++){for(s=0;e>s;s++)for(o=0;o<this.r;o++)a[c++]=this.v[o+s*this.r+h*w];for(s=0;s<n.c;s++)for(o=0;o<this.r;o++)a[c++]=n.v[o+s*n.r+h*p];for(s=t+1;s<this.c;s++)for(o=0;o<this.r;o++)a[c++]=this.v[o+s*this.r+h*w]}else{for(v=w*(this.p-l+n.p),L2.assert.maxEnt(v),a=new Array(v),s=e*w,o=0;s>o;o++)a[c++]=this.v[o];for(s=n.v.length,o=0;s>o;o++)a[c++]=n.v[o];for(s=this.v.length,o=(t+1)*w;s>o;o++)a[c++]=this.v[o]}if(this[u]){if(!n[u])throw new Error("second table has no "+L2.aux.expandDim[r]+" keys");f={};for(o in this[u])i=this[u][o],e>i?f[o]=i:i>t&&(f[o]=i+n[r]-l);for(o in n[u]){if(o in f)throw new Error("will result in duplicate key");f[o]=n[u][o]+e}this[u]=f}this.v=a,this[r]=this[r]-l+n[r]}return this},L2.P["slice:"].sig={arg:[1,1,2],rtn:!0,min:2,dim:1},L2.P.slice=function(r,e,t,n){if(4===arguments.length&&"cut"!==n)throw new Error("argument must be 'cut'");var i=new L2.ArShell(this),o=r+"k";if(e=this._getInd(e,r),void 0===t)return i.v=[],i[o]&&(i[o]={}),i[r]=0,i;if(t=this._getInd(t,r),e>t)throw new Error("end index less than start index");var s,h,f,a,v,u=i.r*i.c,c=0,l=t-e+1;if(i[o])if(i[o]={},n)for(f in this[o])s=this[o][f],s>=e&&t>=s?(i[o][f]=s-e,delete this[o][f]):s>t&&(this[o][f]=s-l);else for(f in this[o])s=this[o][f],s>=e&&t>=s&&(i[o][f]=s-e);if(0===this.v.length)i.v=[],n&&(h=[]);else if("r"===r){for(i.v=new Array(l*i.c*i.p),v=0;v<i.p;v++)for(a=0;a<i.c;a++)for(f=e;t>=f;f++)i.v[c++]=this.v[f+a*i.r+v*u];if(n)for(c=0,h=new Array(this.v.length-i.v.length),v=0;v<i.p;v++)for(a=0;a<i.c;a++){for(f=0;e>f;f++)h[c++]=this.v[f+a*i.r+v*u];for(f=t+1;f<i.r;f++)h[c++]=this.v[f+a*i.r+v*u]}}else if("c"===r){for(i.v=new Array(i.r*l*i.p),v=0;v<i.p;v++)for(a=e;t>=a;a++)for(f=0;f<i.r;f++)i.v[c++]=this.v[f+a*i.r+v*u];if(n)for(c=0,h=new Array(this.v.length-i.v.length),v=0;v<i.p;v++){for(a=0;e>a;a++)for(f=0;f<i.r;f++)h[c++]=this.v[f+a*i.r+v*u];for(a=t+1;a<i.c;a++)for(f=0;f<i.r;f++)h[c++]=this.v[f+a*i.r+v*u]}}else{for(i.v=new Array(u*l),a=(t+1)*u,f=e*u;a>f;f++)i.v[c++]=this.v[f];if(n){for(c=0,h=new Array(this.v.length-i.v.length),a=e*u,f=0;a>f;f++)h[c++]=this.v[f];for(a=this.v.length,f=(t+1)*u;a>f;f++)h[c++]=this.v[f]}}return i[r]=l,n&&(this.v=h,this[r]-=l),i},L2.P.slice.sig={arg:[1,1,1],rtn:!0,min:1,dim:1},L2.P["use:"]=function(r,e){if(void 0===e)return this;if(e instanceof L2.Ar&&e[r+"k"]){if(1===e.v.length&&("r"===r&&(1!==this.c||1!==this.p)||"c"===r&&(1!==this.r||1!==this.p)||"p"===r&&(1!==this.r||1!==this.c)))throw new Error("shape mismatch");this._oneDimSetAr(r,e.key(r),e)}return this},L2.P["use:"].sig={arg:[3],rtn:!0,min:1,dim:1},L2.P.use=function(r,e){throw new Error("setter operator only, ':' required")},L2.P.use.sig={arg:[3],rtn:!0,min:1,dim:1},L2.P.ind=function(r){for(var e=this[r+"k"],t=new L2.Ar(this[r],void 0,!0),n=0;n<this[r];n++)t.v[n]=n;if(e){t.z=!0,t.rk={};for(n in e)t.rk[n]=e[n]}return t},L2.P.ind.sig={arg:[],rtn:!0,min:0,dim:1},L2.P.sample=function(r,e){var t,n,e=Number(e);if(Math.round(e)!==e||1>e||e>L2.ops.maxEnt)throw new Error("invalid sample size");if(0===this.v.length)throw new Error("cannot sample from empty table");if(this[r+"k"])throw new Error("dimension has keys - risk of duplicate key in sample");for(n=new L2.Ar(e,void 0,!0),t=0;e>t;t++)n.v[t]=Math.floor(Math.random()*this[r]);return this._oneDimAr(r,n)},L2.P.sample.sig={arg:[1],rtn:!0,min:1,dim:1},L2.P.cat=function(r,e){if(1!==this.c||1!==this.p)throw new Error("vector expected");if(0===this.r)throw new Error("probability table cannot be empty");var r=Number(r);if(Math.round(r)!==r||1>r||r>L2.ops.maxEnt)throw new Error("invalid sample size");var t,n,i,o,s=new Array(this.r),h=0;for(t=0;t<this.r;t++){if(i=Number(this.v[t]),0>i||!isFinite(i))throw new Error("probabilities must be non-negative and finite");s[t]=h+=i}if(0===h)throw new Error("one or more probabilities must be non-zero");for(t=0;t<this.r;t++)s[t]/=h;var f=new L2.Ar(r,void 0,!0);for(t=0;r>t;t++)for(i=Math.random(),n=0;n<this.r;n++)if(i<=s[n]){f.v[t]=n;break}if(2===arguments.length){if("key"!==e)throw new Error("argument must be 'key'");if(!this.rk)throw new Error("probability table does not have row keys");o=new Array(this.r);for(t in this.rk)o[this.rk[t]]=t;for(t=0;r>t;t++)f.v[t]=o[f.v[t]]}return f},L2.P.cat.sig={arg:[1,1],rtn:!0,min:1,dim:0},L2.P.find=function(){for(var r=this.v.length,e=new Array(r),t=0,n=0;r>n;n++)this.v[n]&&(e[t++]=n);return e.length=t,new L2.ArJSA(e)},L2.P.find.sig={arg:[],rtn:!0,min:0,dim:0},L2.P.sum=function(r){var e,t,n,i,o,s,h,f,a,v=0;if("e"===r){for(o=this.v.length,f=v,t=0;o>t;t++)f+=this.v[t];return new L2.ArJSA([f])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(t=n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,n+=e.r;n>t;t++)f+=this.v[t];e.v[o++]=f}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)f+=this.v[n];e.v[o++]=f}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)f+=this.v[i];e.v[t]=f}e.p=1}return e},L2.P.sum.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.join=function(r,e){e=void 0===e?",":String(e);var t,n,i,o,s,h,f,a,v,u="";if("e"===r){if(s=this.v.length,a=u,s>0)if(e){for(n=0;s-1>n;n++)a+=this.v[n]+e;a+=this.v[n]}else for(n=0;s>n;n++)a+=this.v[n];return new L2.ArJSA([a])}if(t=new L2.ArShell(this,r),t.e&&(delete t.e[r+"l"],delete t.e[r+"f"],delete t.e.ef,delete t.e.t,delete t.e.i,L2.aux.isEmpty(t.e)&&delete t.e),s=0,v=t.r*t.c,"r"===r){if(i=0,o=t.c*t.p,t.v=new Array(o),t.r)for(;o>s;){if(e){for(a=u,n=0;n<t.r-1;n++)a+=this.v[i++]+e;a+=this.v[i++]}else for(a=u,n=0;n<t.r;n++)a+=this.v[i++];t.v[s++]=a}else for(n=0;o>n;n++)t.v[n]="";t.r=1}else if("c"===r){if(t.v=new Array(t.r*t.p),t.c)for(o=0;o<t.p;o++)for(h=o*v,f=h+v,n=0;n<t.r;n++){if(e){for(a=u,i=h+n;i<f-t.r;i+=t.r)a+=this.v[i]+e;a+=this.v[i]}else for(a=u,i=h+n;f>i;i+=t.r)a+=this.v[i];t.v[s++]=a}else for(i=t.r*t.p,n=0;i>n;n++)t.v[n]="";t.c=1}else{if(t.v=new Array(v),i=this.v.length,t.p)for(n=0;v>n;n++){if(e){for(a=u,o=n;i-v>o;o+=v)a+=this.v[o]+e;a+=this.v[o]}else for(a=u,o=n;i>o;o+=v)a+=this.v[o];t.v[s++]=a}else for(n=0;v>n;n++)t.v[n]="";t.p=1}return t},L2.P.join.sig={arg:[1],rtn:!0,min:0,dim:2},L2.P.prod=function(r){var e,t,n,i,o,s,h,f,a,v=1;if("e"===r){for(o=this.v.length,f=v,t=0;o>t;t++)f*=this.v[t];return new L2.ArJSA([f])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(t=n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,n+=e.r;n>t;t++)f*=this.v[t];e.v[o++]=f}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)f*=this.v[n];e.v[o++]=f}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)f*=this.v[i];e.v[t]=f}e.p=1}return e},L2.P.prod.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.min=function(r,e){if(2===arguments.length&&"index"!==e&&"key"!==e)throw new Error("argument must be 'index' or 'key'");var t,n,i,o,s,h,f,a,v,u,c,l,w=1/0;if("e"===r){if("key"===e)throw new Error("cannot use argument 'key' with suffix 'E'");if(s=this.v.length,c=w,e){for(v=0,n=0;s>n;n++)this.v[n]<c&&(c=this.v[n],v=n);return new L2.ArJSA([v])}for(n=0;s>n;n++)c=Math.min(c,this.v[n]);return new L2.ArJSA([c])}if(t=new L2.ArShell(this,r),"key"===e){if(!this[r+"k"])throw new Error("table has no "+L2.aux.expandDim[r]+" keys");a=this.key(r).v}if(t.e&&(delete t.e[r+"l"],delete t.e[r+"f"],delete t.e.ef,delete t.e.t,delete t.e.i,L2.aux.isEmpty(t.e)&&delete t.e),s=0,l=t.r*t.c,"r"===r){if(n=i=0,o=t.c*t.p,t.v=new Array(o),e)for(;o>s;)if(t.r){for(c=w,v=0,i+=t.r;i>n;n++)this.v[n]<c&&(c=this.v[n],v=n);t.v[s++]="key"===e?a[v%t.r]:v%t.r}else t.v[s++]="key"===e?"n/a":NaN;else for(;o>s;){for(c=w,i+=t.r;i>n;n++)c=Math.min(c,this.v[n]);t.v[s++]=c}t.r=1}else if("c"===r){if(t.v=new Array(t.r*t.p),e)for(o=0;o<t.p;o++)for(h=o*l,f=h+l,n=0;n<t.r;n++)if(t.c){for(c=w,v=0,u=0,i=h+n;f>i;i+=t.r,u++)this.v[i]<c&&(c=this.v[i],v=u);t.v[s++]="key"===e?a[v]:v}else t.v[s++]="key"===e?"n/a":NaN;else for(o=0;o<t.p;o++)for(h=o*l,f=h+l,n=0;n<t.r;n++){for(c=w,i=h+n;f>i;i+=t.r)c=Math.min(c,this.v[i]);t.v[s++]=c}t.c=1}else{if(t.v=new Array(l),i=this.v.length,e)for(n=0;l>n;n++)if(t.p){for(c=w,v=0,u=0,o=n;i>o;o+=l,u++)this.v[o]<c&&(c=this.v[o],v=u);t.v[n]="key"===e?a[v]:v}else t.v[n]="key"===e?"n/a":NaN;else for(n=0;l>n;n++){for(c=w,o=n;i>o;o+=l)c=Math.min(c,this.v[o]);t.v[n]=c}t.p=1}return t},L2.P.min.sig={arg:[1],rtn:!0,min:0,dim:2},L2.P.max=function(r,e){if(2===arguments.length&&"index"!==e&&"key"!==e)throw new Error("argument must be 'index' or 'key'");var t,n,i,o,s,h,f,a,v,u,c,l,w=-(1/0);if("e"===r){if("key"===e)throw new Error("cannot use argument 'key' with suffix 'E'");if(s=this.v.length,c=w,e){for(v=0,n=0;s>n;n++)this.v[n]>c&&(c=this.v[n],v=n);return new L2.ArJSA([v])}for(n=0;s>n;n++)c=Math.max(c,this.v[n]);return new L2.ArJSA([c])}if(t=new L2.ArShell(this,r),"key"===e){if(!this[r+"k"])throw new Error("table has no "+L2.aux.expandDim[r]+" keys");a=this.key(r).v}if(t.e&&(delete t.e[r+"l"],delete t.e[r+"f"],delete t.e.ef,delete t.e.t,delete t.e.i,L2.aux.isEmpty(t.e)&&delete t.e),s=0,l=t.r*t.c,"r"===r){if(n=i=0,o=t.c*t.p,t.v=new Array(o),e)for(;o>s;)if(t.r){for(c=w,v=0,i+=t.r;i>n;n++)this.v[n]>c&&(c=this.v[n],v=n);t.v[s++]="key"===e?a[v%t.r]:v%t.r}else t.v[s++]="key"===e?"n/a":NaN;else for(;o>s;){for(c=w,i+=t.r;i>n;n++)c=Math.max(c,this.v[n]);t.v[s++]=c}t.r=1}else if("c"===r){if(t.v=new Array(t.r*t.p),e)for(o=0;o<t.p;o++)for(h=o*l,f=h+l,n=0;n<t.r;n++)if(t.c){for(c=w,v=0,u=0,i=h+n;f>i;i+=t.r,u++)this.v[i]>c&&(c=this.v[i],v=u);t.v[s++]="key"===e?a[v]:v}else t.v[s++]="key"===e?"n/a":NaN;else for(o=0;o<t.p;o++)for(h=o*l,f=h+l,n=0;n<t.r;n++){for(c=w,i=h+n;f>i;i+=t.r)c=Math.max(c,this.v[i]);t.v[s++]=c}t.c=1}else{if(t.v=new Array(l),i=this.v.length,e)for(n=0;l>n;n++)if(t.p){for(c=w,v=0,u=0,o=n;i>o;o+=l,u++)this.v[o]>c&&(c=this.v[o],v=u);t.v[n]="key"===e?a[v]:v}else t.v[n]="key"===e?"n/a":NaN;else for(n=0;l>n;n++){for(c=w,o=n;i>o;o+=l)c=Math.max(c,this.v[o]);t.v[n]=c}t.p=1}return t},L2.P.max.sig={arg:[1],rtn:!0,min:0,dim:2},L2.P.mean=function(r){var e,t,n,i,o,s,h,f,a,v=0;if("e"===r){for(o=this.v.length,f=v,t=0;o>t;t++)f+=this.v[t];return new L2.ArJSA([f/o])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(t=n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,n+=e.r;n>t;t++)f+=this.v[t];e.v[o++]=f/e.r}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)f+=this.v[n];e.v[o++]=f/e.c}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)f+=this.v[i];e.v[t]=f/e.p}e.p=1}return e},L2.P.mean.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.range=function(r){for(var e=this.max(r),t=this.min(r),n=0,i=e.v.length;i>n;n++)e.v[n]-=t.v[n];return e},L2.P.range.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.geoMean=function(r){var e,t,n,i,o,s,h,f,a,v=1;if("e"===r){for(o=this.v.length,f=v,t=0;o>t;t++)f*=this.v[t];return new L2.ArJSA([Math.pow(f,1/o)])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(t=n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,n+=e.r;n>t;t++)f*=this.v[t];e.v[o++]=Math.pow(f,1/e.r)}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)f*=this.v[n];e.v[o++]=Math.pow(f,1/e.c)}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)f*=this.v[i];e.v[t]=Math.pow(f,1/e.p)}e.p=1}return e},L2.P.geoMean.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.count=function(r){var e,t,n,i,o,s,h,f,a,v=0;if("e"===r){for(o=this.v.length,f=v,t=0;o>t;t++)this.v[t]&&f++;return new L2.ArJSA([f])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(t=n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,n+=e.r;n>t;t++)this.v[t]&&f++;e.v[o++]=f}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)this.v[n]&&f++;e.v[o++]=f}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)this.v[i]&&f++;e.v[t]=f}e.p=1}return e},L2.P.count.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.any=function(r){var e,t,n,i,o,s,h,f,a,v=!1;if("e"===r){for(o=this.v.length,t=0;o>t;t++)if(this.v[t])return new L2.ArJSA([!0]);return new L2.ArJSA([v])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,t=n,n+=e.r;n>t;t++)if(this.v[t]){f=!0;break}e.v[o++]=f}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)if(this.v[n]){f=!0;break}e.v[o++]=f}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)if(this.v[i]){f=!0;break}e.v[t]=f}e.p=1}return e},L2.P.any.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.all=function(r){var e,t,n,i,o,s,h,f,a,v=!0;if("e"===r){for(o=this.v.length,t=0;o>t;t++)if(!this.v[t])return new L2.ArJSA([!1]);return new L2.ArJSA([v])}if(e=new L2.ArShell(this,r),e.e&&(delete e.e[r+"l"],delete e.e[r+"f"],delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),o=0,a=e.r*e.c,"r"===r){for(n=0,i=e.c*e.p,e.v=new Array(i);i>o;){for(f=v,t=n,n+=e.r;n>t;t++)if(!this.v[t]){f=!1;break}e.v[o++]=f}e.r=1}else if("c"===r){for(e.v=new Array(e.r*e.p),i=0;i<e.p;i++)for(s=i*a,h=s+a,t=0;t<e.r;t++){for(f=v,n=s+t;h>n;n+=e.r)if(!this.v[n]){f=!1;break}e.v[o++]=f}e.c=1}else{for(e.v=new Array(a),n=this.v.length,t=0;a>t;t++){for(f=v,i=t;n>i;i+=a)if(!this.v[i]){f=!1;break}e.v[t]=f}e.p=1}return e},L2.P.all.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.first=function(r,e){if(2===arguments.length&&"key"!==e)throw new Error("argument must be 'key'");var t,n,i,o,s,h,f,a,v,u,c,l=1/0;if("e"===r){if(e)throw new Error("cannot return key when suffix 'E' used");for(s=this.v.length,n=0;s>n;n++)if(this.v[n])return new L2.ArJSA([n]);return new L2.ArJSA([l])}if(t=new L2.ArShell(this,r),e){if(!this[r+"k"])throw new Error("table has no "+L2.aux.expandDim[r]+" keys");v=this.key(r).v}if(t.e&&(delete t.e[r+"l"],delete t.e[r+"f"],delete t.e.ef,delete t.e.t,delete t.e.i,L2.aux.isEmpty(t.e)&&delete t.e),s=0,c=t.r*t.c,"r"===r){for(o=t.c*t.p,t.v=new Array(o),i=0;o>s;){for(u=l,n=i,i+=t.r;i>n;n++)if(this.v[n]){u=n;break}u===l?t.v[s++]=e?"n/a":l:t.v[s++]=e?v[u%t.r]:u%t.r}t.r=1}else if("c"===r){for(t.v=new Array(t.r*t.p),o=0;o<t.p;o++)for(h=o*c,f=h+c,n=0;n<t.r;n++){for(u=l,a=0,i=h+n;f>i;i+=t.r,a++)if(this.v[i]){u=a;break}u===l?t.v[s++]=e?"n/a":l:t.v[s++]=e?v[u]:u}t.c=1}else{for(t.v=new Array(c),i=this.v.length,n=0;c>n;n++){for(u=l,a=0,o=n;i>o;o+=c,a++)if(this.v[o]){u=a;break}u===l?t.v[n]=e?"n/a":l:t.v[n]=e?v[u]:u}t.p=1}return t},L2.P.first.sig={arg:[1],rtn:!0,min:0,dim:2},L2.P.last=function(r,e){if(2===arguments.length&&"key"!==e)throw new Error("argument must be 'key'");var t,n,i,o,s,h,f,a,v,u,c,l=-(1/0);if("e"===r){if(e)throw new Error("cannot return key when suffix 'E' used");for(n=this.v.length-1;n>=0;n--)if(this.v[n])return new L2.ArJSA([n]);return new L2.ArJSA([l])}if(t=new L2.ArShell(this,r),e){if(!this[r+"k"])throw new Error("table has no "+L2.aux.expandDim[r]+" keys");v=this.key(r).v}if(t.e&&(delete t.e[r+"l"],delete t.e[r+"f"],delete t.e.ef,delete t.e.t,delete t.e.i,L2.aux.isEmpty(t.e)&&delete t.e),c=t.r*t.c,"r"===r){for(o=t.c*t.p,t.v=new Array(o),i=this.v.length-1,s=o-1;s>=0;){for(u=l,n=i,i-=t.r;n>i;n--)if(this.v[n]){u=n;break}u===l?t.v[s--]=e?"n/a":l:t.v[s--]=e?v[u%t.r]:u%t.r}t.r=1}else if("c"===r){for(t.v=new Array(t.r*t.p),s=0,o=0;o<t.p;o++)for(h=o*c,f=(t.c-1)*t.r,n=0;n<t.r;n++){for(u=l,a=t.c-1,i=h+n+f;i>=h;i-=t.r,a--)if(this.v[i]){u=a;break}u===l?t.v[s++]=e?"n/a":l:t.v[s++]=e?v[u]:u}t.c=1}else{for(t.v=new Array(c),i=this.v.length,n=0;c>n;n++){for(u=l,a=t.p-1,o=n+(t.p-1)*c;o>=0;o-=c,a--)if(this.v[o]){u=a;break}u===l?t.v[n]=e?"n/a":l:t.v[n]=e?v[u]:u}t.p=1}return t},L2.P.last.sig={arg:[1],rtn:!0,min:0,dim:2},L2.P.cuSum=function(r){var e,t,n,i,o,s,h,f;if(o=this.v.length,s=new Array(o),"e"===r){if(0===o)return new L2.ArJSA([]);for(s[0]=this.v[0],t=1;o>t;t++)s[t]=s[t-1]+this.v[t];return new L2.ArJSA(s)}if(e=new L2.ArShell(this),0===o)return e.v=[],e;if(f=e.r*e.c,e.e&&(delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),"r"===r)for(n=0;o>n;)for(s[n]=this.v[n],n++,t=1;t<e.r;t++,n++)s[n]=s[n-1]+this.v[n];else if("c"===r)for(i=0;i<e.p;i++)for(t=0;t<e.r;t++)for(h=t+f*i,s[h]=this.v[h],n=1;n<e.c;n++)h=t+n*e.r+f*i,s[h]=s[h-e.r]+this.v[h];else for(n=0;f>n;n++)for(s[n]=this.v[n],t=n+f;o>t;t+=f)s[t]=s[t-f]+this.v[t];return e.v=s,e},L2.P.cuSum.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.cuProd=function(r){var e,t,n,i,o,s,h,f;if(o=this.v.length,s=new Array(o),"e"===r){if(0===o)return new L2.ArJSA([]);for(s[0]=this.v[0],t=1;o>t;t++)s[t]=s[t-1]*this.v[t];return new L2.ArJSA(s)}if(e=new L2.ArShell(this),0===o)return e.v=[],e;if(f=e.r*e.c,e.e&&(delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),"r"===r)for(n=0;o>n;)for(s[n]=this.v[n],n++,t=1;t<e.r;t++,n++)s[n]=s[n-1]*this.v[n];else if("c"===r)for(i=0;i<e.p;i++)for(t=0;t<e.r;t++)for(h=t+f*i,s[h]=this.v[h],n=1;n<e.c;n++)h=t+n*e.r+f*i,s[h]=s[h-e.r]*this.v[h];else for(n=0;f>n;n++)for(s[n]=this.v[n],t=n+f;o>t;t+=f)s[t]=s[t-f]*this.v[t];return e.v=s,e},L2.P.cuProd.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.cuMin=function(r){var e,t,n,i,o,s,h,f;if(o=this.v.length,s=new Array(o),"e"===r){if(0===o)return new L2.ArJSA([]);for(s[0]=this.v[0],t=1;o>t;t++)s[t]=Math.min(s[t-1],this.v[t]);return new L2.ArJSA(s)}if(e=new L2.ArShell(this),0===o)return e.v=[],e;if(f=e.r*e.c,e.e&&(delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),"r"===r)for(n=0;o>n;)for(s[n]=this.v[n],n++,t=1;t<e.r;t++,n++)s[n]=Math.min(s[n-1],this.v[n]);else if("c"===r)for(i=0;i<e.p;i++)for(t=0;t<e.r;t++)for(h=t+f*i,s[h]=this.v[h],n=1;n<e.c;n++)h=t+n*e.r+f*i,s[h]=Math.min(s[h-e.r],this.v[h]);else for(n=0;f>n;n++)for(s[n]=this.v[n],t=n+f;o>t;t+=f)s[t]=Math.min(s[t-f],this.v[t]);return e.v=s,e},L2.P.cuMin.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.cuMax=function(r){var e,t,n,i,o,s,h,f;if(o=this.v.length,s=new Array(o),"e"===r){if(0===o)return new L2.ArJSA([]);for(s[0]=this.v[0],t=1;o>t;t++)s[t]=Math.max(s[t-1],this.v[t]);return new L2.ArJSA(s)}if(e=new L2.ArShell(this),0===o)return e.v=[],e;if(f=e.r*e.c,e.e&&(delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),"r"===r)for(n=0;o>n;)for(s[n]=this.v[n],n++,t=1;t<e.r;t++,n++)s[n]=Math.max(s[n-1],this.v[n]);else if("c"===r)for(i=0;i<e.p;i++)for(t=0;t<e.r;t++)for(h=t+f*i,s[h]=this.v[h],n=1;n<e.c;n++)h=t+n*e.r+f*i,s[h]=Math.max(s[h-e.r],this.v[h]);else for(n=0;f>n;n++)for(s[n]=this.v[n],t=n+f;o>t;t+=f)s[t]=Math.max(s[t-f],this.v[t]);return e.v=s,e},L2.P.cuMax.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.cuCount=function(r){var e,t,n,i,o,s,h,f;if(o=this.v.length,s=new Array(o),"e"===r){if(0===o)return new L2.ArJSA([]);for(s[0]=this.v[0]?1:0,t=1;o>t;t++)s[t]=s[t-1]+!!this.v[t];return new L2.ArJSA(s)}if(e=new L2.ArShell(this),0===o)return e.v=[],e;if(f=e.r*e.c,e.e&&(delete e.e.ef,delete e.e.t,delete e.e.i,L2.aux.isEmpty(e.e)&&delete e.e),"r"===r)for(n=0;o>n;)for(s[n]=this.v[n]?1:0,n++,t=1;t<e.r;t++,n++)s[n]=s[n-1]+!!this.v[n];else if("c"===r)for(i=0;i<e.p;i++)for(t=0;t<e.r;t++)for(h=t+f*i,s[h]=this.v[h]?1:0,n=1;n<e.c;n++)h=t+n*e.r+f*i,s[h]=s[h-e.r]+!!this.v[h];else for(n=0;f>n;n++)for(s[n]=this.v[n]?1:0,t=n+f;o>t;t+=f)s[t]=s[t-f]+!!this.v[t];return e.v=s,e},L2.P.cuCount.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.saveCSV=function(r,e){var t,n,i,o,s,h,f,a,s="";if(0===this.v.length)throw new Error("cannot save empty table as csv file");if(2===arguments.length){if("name"!==e)throw new Error("argument must be 'name'");if(!this.ck)throw new Error("cannot use 'name' if table does not have column keys");for(i=this.key("c").v,h=0;h<this.c-1;h++)s+=L2.aux.exportStringCSV(i[h])+",";s+=L2.aux.exportStringCSV(i[this.c-1])+"\n"}for(t=this.r*this.c,a=0;a<this.p;a++)for(h=0;h<this.r;h++)for(f=0;f<this.c;f++)n=this.v[h+f*this.r+a*t],o=typeof n,"number"===o||"boolean"===o?s+=n:"string"===o?s+=L2.aux.exportStringCSV(n):void 0!==n&&(s+=L2.aux.exportStringCSV(n.toString())),s+=f===this.c-1?"\n":",";return L2.sc.write(s,r),!0},L2.P.saveCSV.sig={arg:[1,1],rtn:!1,min:1,dim:0},L2.P.save=function(r){var e,t,n;if(this.e&&(this.e.rf||this.e.cf||this.e.pf||this.e.ef))throw new Error("cannot save table with format functions");for(e=0,t=this.v.length;t>e;e++)if(n=typeof this.v[e],"number"!==n&&"boolean"!==n&&"string"!==n&&"undefined"!==n)throw new Error("entry cannot be of type date, regex, function or box");if(".L2T"!==r.slice(-4).toUpperCase())throw new Error("file extension must be '.L2T'");return L2.sc.write(JSON.stringify(this),r),!0},L2.P.save.sig={arg:[1],rtn:!1,min:1,dim:0},L2.P.toJSONa=function(){return JSON.stringify(L2.toJS(this))},L2.P.toJSONa.sig={arg:[],rtn:!1,min:0,dim:0},L2.P.unique=function(r){if("e"!==r)throw new Error("invalid suffix - use .uniqueE");var e,t=this.v.length,n=new Array(t),i=0;r:for(var o=0;t>o;o++){e=this.v[o];for(var s=0;i>s;s++)if(e===n[s])continue r;n[i++]=e}return n.length=i,new L2.ArJSA(n)},L2.P.unique.sig={arg:[],rtn:!0,min:0,dim:2},L2.P.inter=function(r,e){if("e"!==r)throw new Error("invalid suffix - use .interE");var t,n=this.v.length,i=e.v.length,o=new Array(Math.max(n,i)),s=0;r:for(var h=0;n>h;h++){t=this.v[h];for(var f=0;s>f;f++)if(t===o[f])continue r;for(var a=0;i>a;a++)if(t===e.v[a]){o[s++]=t;break}}return o.length=s,new L2.ArJSA(o)},L2.P.inter.sig={arg:[2],rtn:!0,min:1,dim:2},L2.P.union=function(r,e){if("e"!==r)throw new Error("invalid suffix - use .unionE");var t,n=this.v.length,i=e.v.length,o=new Array(n+i),s=0;r:for(var h=0;n>h;h++){t=this.v[h];for(var f=0;s>f;f++)if(t===o[f])continue r;o[s++]=t}r:for(h=0;i>h;h++){for(t=e.v[h],f=0;s>f;f++)if(t===o[f])continue r;o[s++]=t}return o.length=s,new L2.ArJSA(o)},L2.P.union.sig={arg:[2],rtn:!0,min:1,dim:2},L2.P.diff=function(r,e){if("e"!==r)throw new Error("invalid suffix - use .diffE");var t,n=this.v.length,i=e.v.length,o=new Array(n),s=0;r:for(var h=0;n>h;h++){t=this.v[h];for(var f=0;s>f;f++)if(t===o[f])continue r;for(f=0;i>f;f++)if(t===e.v[f])continue r;o[s++]=t}return o.length=s,new L2.ArJSA(o)},L2.P.diff.sig={arg:[2],rtn:!0,min:1,dim:2},L2.P.freq=function(r){if(1===arguments.length&&"key"!==r)throw new Error("argument must be 'key'");var e,t=this.v.length,n=new Array(t),i=new Array(t),o=0;r:for(var s=0;t>s;s++){e=this.v[s];for(var h=0;o>h;h++)if(e===i[h]){n[h]++;continue r}i[o]=e,n[o++]=1}if(n.length=o,i.length=o,r){for(s=0;o>s;s++)void 0===i[s]&&(i[s]="undefined");return new L2.ArJSA(n)["key:"]("r",void 0,new L2.ArJSA(i))}var f=new L2.ArJSA(i.concat(n));return f.r=o,f.c=2,f["key:"]("c",void 0,new L2.ArJSA(["value","frequency"])),f},L2.P.freq.sig={arg:[1],rtn:!0,min:0,dim:0},L2.P.group=function(r){var e,t,n,i,o,s,h,f,a,v,u,c,l,w,p,L,d,g,m,A,y,S;if(1!==this.p)throw new Error("matrix expected");if(L=r instanceof L2.Ar)switch(r.v.length){case 1:i=r.v[0];break;case 2:i=r.v[0],o=r.v[1];break;case 3:i=r.v[0],o=r.v[1],s=r.v[2];break;default:throw new Error("must specify 1, 2 or 3 columns to group on")}else i=r;if(L&&1!==r.v.length)if(2===r.v.length){if(this._getInd(i,"c")===this._getInd(o,"c"))throw new Error("duplicate in argument");for(h=this._oneDimSc("c",i),f=this._oneDimSc("c",o),e=h.unique("e").v,t=f.unique("e").v,l=new Array(e.length),g=0;g<e.length;g++)for(l[g]=new Array(t.length),m=0;m<t.length;m++)l[g][m]=[];for(g=0;g<this.r;g++)l[e.indexOf(h.v[g])][t.indexOf(f.v[g])].push(g);for(p=new Array(e.length*t.length),g=0;g<e.length;g++)for(m=0;m<t.length;m++)L=this._oneDimAr("r",new L2.ArJSA(l[g][m])),L.e&&L["title:"](void 0)["info:"](void 0),L._oneDimAr("c",new L2.ArJSA([i,o]),"cut"),p[g+e.length*m]=new L2.Box(L);S=new L2.ArJSA(p),S.r=e.length,S.c=t.length,S["key:"]("r",void 0,new L2.ArJSA(e)),S["key:"]("c",void 0,new L2.ArJSA(t)),S._setLabel(i,"r",this)._setLabel(o,"c",this)}else{if(v=this._getInd(i,"c"),u=this._getInd(o,"c"),c=this._getInd(s,"c"),v===u||v===c||u===c)throw new Error("duplicate in argument");for(h=this._oneDimSc("c",i),f=this._oneDimSc("c",o),a=this._oneDimSc("c",s),e=h.unique("e").v,t=f.unique("e").v,n=a.unique("e").v,l=new Array(e.length),g=0;g<e.length;g++)for(l[g]=new Array(t.length),m=0;m<t.length;m++)for(l[g][m]=new Array(n.length),A=0;A<n.length;A++)l[g][m][A]=[];for(g=0;g<this.r;g++)l[e.indexOf(h.v[g])][t.indexOf(f.v[g])][n.indexOf(a.v[g])].push(g);for(d=e.length*t.length,p=new Array(d*n.length),g=0;g<e.length;g++)for(m=0;m<t.length;m++)for(A=0;A<n.length;A++)L=this._oneDimAr("r",new L2.ArJSA(l[g][m][A])),L.e&&L["title:"](void 0)["info:"](void 0),L._oneDimAr("c",new L2.ArJSA([i,o,s]),"cut"),p[g+e.length*m+d*A]=new L2.Box(L);S=new L2.ArJSA(p),S.r=e.length,S.c=t.length,S.p=n.length,S["key:"]("r",void 0,new L2.ArJSA(e)),S["key:"]("c",void 0,new L2.ArJSA(t)),S["key:"]("p",void 0,new L2.ArJSA(n)),S._setLabel(i,"r",this)._setLabel(o,"c",this)._setLabel(s,"p",this)}else{l=[],w=[],h=this._oneDimSc("c",i).v;r:for(g=0;g<this.r;g++){L=h[g];for(var m=0;m<w.length;m++)if(L===w[m]){l[m].push(g);continue r}w.push(L),l.push([g])}for(y=w.length,p=new Array(y),g=0;y>g;g++)L=this._oneDimAr("r",new L2.ArJSA(l[g])),L.e&&L["title:"](void 0)["info:"](void 0),L._oneDimSc("c",i,"cut"),p[g]=new L2.Box(L);S=new L2.ArJSA(p),S["key:"]("r",void 0,new L2.ArJSA(w)),S._setLabel(i,"r",this)}return S},L2.P.group.sig={arg:[3],rtn:!0,min:1,dim:0},L2.P.tally=function(r){var e,t,n,i,o,s,h,f,a,v,u,c,l,w,p,L,d,g,m,A;if(1!==this.p)throw new Error("matrix expected");if(p=r instanceof L2.Ar)switch(r.v.length){case 1:i=r.v[0];break;case 2:i=r.v[0],o=r.v[1];break;case 3:i=r.v[0],o=r.v[1],s=r.v[2];break;default:throw new Error("must specify 1, 2 or 3 columns to group on")}else i=r;if(p&&1!==r.v.length)if(2===r.v.length){if(this._getInd(i,"c")===this._getInd(o,"c"))throw new Error("duplicate in argument");for(h=this._oneDimSc("c",i),f=this._oneDimSc("c",o),e=h.unique("e").v,t=f.unique("e").v,m=e.length*t.length,w=new Array(m),d=0;m>d;d++)w[d]=0;for(d=0;d<this.r;d++)w[e.indexOf(h.v[d])+e.length*t.indexOf(f.v[d])]++;A=new L2.ArJSA(w),A.r=e.length,A.c=t.length,A["key:"]("r",void 0,new L2.ArJSA(e))["key:"]("c",void 0,new L2.ArJSA(t))._setLabel(i,"r",this)._setLabel(o,"c",this)}else{if(v=this._getInd(i,"c"),u=this._getInd(o,"c"),c=this._getInd(s,"c"),v===u||v===c||u===c)throw new Error("duplicate in argument");for(h=this._oneDimSc("c",i),f=this._oneDimSc("c",o),a=this._oneDimSc("c",s),e=h.unique("e").v,t=f.unique("e").v,n=a.unique("e").v,L=e.length*t.length,m=L*n.length,w=new Array(m),d=0;m>d;d++)w[d]=0;for(d=0;d<this.r;d++)w[e.indexOf(h.v[d])+e.length*t.indexOf(f.v[d])+L*n.indexOf(a.v[d])]++;A=new L2.ArJSA(w),A.r=e.length,A.c=t.length,A.p=n.length,A["key:"]("r",void 0,new L2.ArJSA(e))["key:"]("c",void 0,new L2.ArJSA(t))["key:"]("p",void 0,new L2.ArJSA(n)),A._setLabel(i,"r",this)._setLabel(o,"c",this)._setLabel(s,"p",this)}else{l=[],w=[],h=this._oneDimSc("c",i).v;r:for(d=0;d<this.r;d++){p=h[d];for(var g=0;g<l.length;g++)if(p===l[g]){w[g]++;continue r}l.push(p),w.push(1)}A=new L2.ArJSA(w)["key:"]("r",void 0,new L2.ArJSA(l))._setLabel(i,"r",this)}return A},L2.P.tally.sig={arg:[3],rtn:!0,min:1,dim:0},L2.P.hasKey=function(r){return!!this[r+"k"]},L2.P.hasKey.sig={arg:[],rtn:!1,min:0,dim:1},L2.P.map=function(r){var e,t,n=this.v.length;if("function"!=typeof r)throw new Error("function expected");for(t=new L2.ArShell(this),t.v=new Array(n),e=0;n>e;e++){if(!(this.v[e]instanceof L2.Box))throw new Error("box expected");t.v[e]=new L2.Box(L2.tab(r(this.v[e]._contents_)))}return t;
},L2.P.map.sig={arg:[1],rtn:!0,min:1,dim:0},L2.P.nest=function(){function r(r,e){var t,n,i,o;if(i=new Array(r[e]),o=r[e+"k"])for(t in o)i[o[t]]=t;else if("c"===e)for(t=0,n=r[e];n>t;t++)i[t]="col_"+t;else for(t=0,n=r[e];n>t;t++)i[t]=t;return i}var e,t,n,i,o,s,h,f,a,v,u;f=r(this,"r"),h=r(this,"c"),h.push(this.e&&"rl"in this.e?this.e.rl:"row"),(this.e&&(s="pl"in this.e)||this.p>1||this.pk)&&(h.push(s?this.e.pl:"page"),a=r(this,"p")),u=new L2.ArJSA(new Array(h.length))["key:"]("r",void 0,new L2.ArJSA(h)),o=new Array(this.r*this.p),i=this.r*this.c;for(n=0;n<this.p;n++)for(e=0;e<this.r;e++){for(v=new L2.ArCopy(u,!0),t=0;t<this.c;t++)v.v[t]=this.v[i*n+this.r*t+e];v.v[this.c]=f[e],a&&(v.v[this.c+1]=a[n]),o[this.r*n+e]=new L2.Box(v)}return new L2.ArJSA(o)},L2.P.nest.sig={arg:[],rtn:!0,min:0,dim:0},L2.P.mm=function(r){var e,t,n,i,o,s,h,f,a,v=new L2.ArTp(this),u=0===v.p||0===r.p?0:Math.max(v.p,r.p),c=v.c,l=r.c,w=v.r,p=c*l*u;L2.assert.maxEnt(p);var L=new L2.ArFast(c,l,u);if(this._twoMatExtras(r,L),w!==r.r||1!==v.p&&1!==r.p&&v.p!==r.p)throw new Error("shape mismatch");if(0===w||0===c||0===l||0===u)return L;for(f=1===v.p?0:c*w,a=1===r.p?0:w*l,i=0;u>i;i++)for(t=0;l>t;t++)for(h=t*w+i*a,e=0;c>e;e++){for(s=e*w+i*f,o=0,n=0;w>n;n++)o+=v.v[s+n]*r.v[h+n];L.v[e+t*c+i*c*l]=o}return L},L2.P.mm.sig={arg:[2],rtn:!0,min:1,dim:0},L2.P.outer=function(r,e){L2.assert.func(e);var t,n,i,o,s,h,f,a,v=0===this.p||0===r.p?0:Math.max(this.p,r.p),u=this.r,c=r.r,l=u*c*v;L2.assert.maxEnt(l);var w=new L2.ArFast(u,c,v);if(this._twoMatExtras(r,w,!0),this.c!==r.c||1!==this.p&&1!==r.p&&this.p!==r.p)throw new Error("shape mismatch");if(0===w.v.length)return w;if(1===v){for(f=new Array(c),n=0;c>n;n++)f[n]=r._oneDimSc("r",n);for(t=0;u>t;t++)for(o=this._oneDimSc("r",t),n=0;c>n;n++)w.v[t+n*u]=L2.sca(e(o,f[n]))}else if(1===this.p){for(h=new Array(u),t=0;u>t;t++)h[t]=this._oneDimSc("r",t);for(i=0;v>i;i++)for(a=new L2.ArJSA([i]),n=0;c>n;n++)for(s=r._twoDim("r","p",new L2.ArJSA([n]),a),t=0;u>t;t++)w.v[t+n*u+i*u*c]=L2.sca(e(h[t],s))}else if(1===r.p){for(f=new Array(c),n=0;c>n;n++)f[n]=r._oneDimSc("r",n);for(i=0;v>i;i++)for(a=new L2.ArJSA([i]),t=0;u>t;t++)for(o=this._twoDim("r","p",new L2.ArJSA([t]),a),n=0;c>n;n++)w.v[t+n*u+i*u*c]=L2.sca(e(o,f[n]))}else for(f=new Array(c),i=0;v>i;i++){for(a=new L2.ArJSA([i]),n=0;c>n;n++)f[n]=r._twoDim("r","p",new L2.ArJSA([n]),a);for(t=0;u>t;t++)for(o=this._twoDim("r","p",new L2.ArJSA([t]),a),n=0;c>n;n++)w.v[t+n*u+i*u*c]=L2.sca(e(o,f[n]))}return w},L2.P.outer.sig={arg:[2,1],rtn:!0,min:2,dim:0},L2.P.inv=function(){var r,e,t;if(this.r!==this.c)throw new Error("matrix must be square");for(e=L2.linAlg.matrix(this),r=0;r<this.p;r++)e[r]=numeric.inv(e[r]);return t=L2.linAlg.unmatrix(e,this.r,this.c,this.p),L2.linAlg.copyPageExtras(this,t),t},L2.P.inv.sig={arg:[],rtn:!0,min:0,dim:0},L2.P.det=function(){var r,e,t,n,i;if(this.r!==this.c)throw new Error("matrix must be square");for(e=L2.linAlg.matrix(this),t=new Array(this.p),r=0;r<this.p;r++){if(i=numeric.det(e[r]),"number"!=typeof i)throw new Error("number expected");t[r]=i}return n=new L2.ArJSA(t),n.r=n.c=1,n.p=this.p,L2.linAlg.copyPageExtras(this,n),n},L2.P.det.sig={arg:[],rtn:!0,min:0,dim:0},L2.P.svd=function(){var r,e,t,n,i,o,s,h,f,a,v,u;if(this.r<this.c)throw new Error("number of rows must be ≥ number of columns");for(n=L2.linAlg.matrix(this),f=this.c,a=this.p,o=new Array(a),s=new Array(f*a),h=new Array(a),t=0,r=0;a>r;r++)for(i=numeric.svd(n[r]),o[r]=i.U,h[r]=i.V,e=0;f>e;e++,t++)s[t]=i.S[e];return u=new L2.ArJSA(new Array(3)),u["key:"]("r",void 0,new L2.ArJSA(["U","S","V"])),v=L2.linAlg.unmatrix(o,this.r,f,a),L2.linAlg.copyPageExtras(this,v),u.v[0]=new L2.Box(v),v=L2.linAlg.unmatrix(h,f,f,a),L2.linAlg.copyPageExtras(this,v),u.v[2]=new L2.Box(v),v=new L2.ArJSA(s),v.r=f,v.p=a,L2.linAlg.copyPageExtras(this,v),u.v[1]=new L2.Box(v),u},L2.P.svd.sig={arg:[],rtn:!0,min:0,dim:0},L2.linAlg={copyPageExtras:function(r,e){if(r.pk){e.z=!0,e.pk={};for(var t in r.pk)e.pk[t]=r.pk[t]}r.e&&(r.e.pl||r.e.pf)&&(e.z=!0,e.e=e.e||{},r.e.pl&&(e.e.pl=r.e.pl),r.e.pf&&(e.e.pf=r.e.pf))},eye:function(r){var e,t,n,i,o;for(r=Number(r),L2.assert.posInt(r),e=r*r,L2.assert.maxEnt(e),t=new Array(e),o=r+1,n=0;e>n;n++)t[n]=0;for(n=0;e>n;n+=o)t[n]=1;return i=new L2.ArJSA(t),i.r=i.c=r,i},matrix:function(r){var e,t,n,i,o,s,h;if(0===r.v.length)throw new Error("cannot convert empty table to matrix");for(h=r.r*r.c,i=new Array(r.p),n=0;n<r.p;n++)for(i[n]=new Array(r.r),e=0;e<r.r;e++)for(o=i[n][e]=new Array(r.c),t=0;t<r.c;t++){if(s=r.v[n*h+t*r.r+e],"number"!=typeof s)throw new Error("entry must be a number");o[t]=s}return i},unmatrix:function(r,e,t,n){var i,o,s,h,f,a,v,u;if(void 0!==n){if(n!==r.length)throw new Error("unexpected number of pages")}else n=r.length;if(void 0!==e){if(e!==r[0].length)throw new Error("unexpected number of rows")}else e=r[0].length;if(void 0!==t){if(t!==r[0][0].length)throw new Error("unexpected number of columns")}else t=r[0][0].length;if(e*t*n===0)throw new Error("cannot convert empty matrix");for(u=e*t,h=new Array(e*t*n),s=0;n>s;s++){if(r[s].length!==e)throw new Error("all pages must have same number of rows");for(i=0;e>i;i++){if(f=r[s][i],f.length!==t)throw new Error("all rows must have same number of columns");for(o=0;t>o;o++){if(v=f[o],"number"!=typeof v)throw new Error("entry must be a number");h[i+o*e+s*u]=v}}}return L2.assert.maxEnt(h.length),a=new L2.ArJSA(h),a.r=e,a.c=t,a.p=n,a}},L2.P._twoMatExtras=function(r,e,t){var n,i,o,s;if(this.z){if(this.rk){e.rk={};for(n in this.rk)e.rk[n]=this.rk[n]}if(this.pk&&this.p===e.p){e.pk={};for(n in this.pk)e.pk[n]=this.pk[n]}this.e&&(this.e.rl||this.e.rf||this.p===e.p&&(this.e.pl||this.e.pf))&&(e.e={},this.e.rl&&(e.e.rl=this.e.rl),this.e.rf&&(e.e.rf=this.e.rf),this.p===e.p&&(this.e.pl&&(e.e.pl=this.e.pl),this.e.pf&&(e.e.pf=this.e.pf))),e.z=!0}if(r.z){if(i=t?r.rk:r.ck){e.ck={};for(n in i)e.ck[n]=i[n]}r.e&&((o=t?r.e.rl:r.e.cl)||(s=t?r.e.rf:r.e.cf))&&(e.e||(e.e={}),o&&(e.e.cl=o),s&&(e.e.cf=s)),e.z=!0}},L2.P._shell=function(r){var e=new L2.ArShell(this);if(e.v=new Array(e.r*e.c*e.p),void 0!==r)for(var t=0,n=e.r*e.c*e.p;n>t;t++)e.v[t]=r;return e},L2.P._n=function(r){if(r=String(r).toLowerCase(),"e"===r)return this.v.length;if("r"===r||"c"===r||"p"===r)return this[r];throw new Error("invalid suffix")},L2.P._appendSc=function(r,e,t,n){L2.assert.maxEnt(this.v.length+1);var i=n?this:new L2.ArCopy(this,!0);if(i.z&&i[e+"k"])throw new Error("cannot append scalar on dimension with keys");if("r"===e&&(1!==i.c||1!==i.p)||"c"===e&&(1!==i.r||1!==i.p)||"p"===e&&(1!==i.r||1!==i.c))throw new Error("shape mismatch");return i[e]++,t?i.v.unshift(r):i.v.push(r),i},L2.P._appendAr=function(r,e,t,n){L2.assert.maxEnt(this.v.length+r.v.length);var i,o,s,h,f,a,v,u,c=new L2.ArShell(this),l=e+"k";if(c[l]){if(!r[l])throw new Error("second table has no "+L2.aux.expandDim[e]+" keys");if(!L2.aux.mutExProps(c[l],r[l]))throw new Error("will result in duplicate key");if(t){for(i in r[l])c[l][i]=r[l][i];for(i in this[l])c[l][i]=this[l][i]+r[e]}else for(i in r[l])c[l][i]=r[l][i]+this[e]}switch(e){case"r":if(c.c!==r.c||c.p!==r.p)throw new Error("shape mismatch");u=c.c*c.p,a=c.r,v=r.r;break;case"c":if(c.r!==r.r||c.p!==r.p)throw new Error("shape mismatch");u=c.p,a=c.r*c.c,v=r.r*r.c;break;default:if(c.r!==r.r||c.c!==r.c)throw new Error("shape mismatch");u=1,a=this.v.length,v=r.v.length}if(c[e]+=r[e],c.v=new Array(this.v.length+r.v.length),i=o=s=h=0,t)for(;u>i;i++){for(f=s+v;f>s;s++)c.v[h++]=r.v[s];for(f=o+a;f>o;o++)c.v[h++]=this.v[o]}else for(;u>i;i++){for(f=o+a;f>o;o++)c.v[h++]=this.v[o];for(f=s+v;f>s;s++)c.v[h++]=r.v[s]}return n?(this.v=c.v,this[e]=c[e],this[l]=c[l],this):c},L2.P._dPush=function(r,e){if(!this.rk||1!==this.c||1!==this.p)throw new Error("dictionary expected");if(void 0===r)throw new Error("undefined not a valid key, use 'undefined' if necessary");var t=this.rk[r];if("number"==typeof t)this.v[t]=e;else{var n=this.v.length;L2.assert.maxEnt(n+1),this.rk[r]=n,this.v[n]=e,this.r++}return this},L2.P._dEnt=function(r){if(!this.rk||1!==this.c||1!==this.p)throw new Error("dictionary expected");if(void 0===r)throw new Error("undefined not a valid key, use 'undefined' if necessary");var e=this.rk[r];if("number"==typeof e)return this.v[e];throw new Error("key does not exist")},L2.P._setRand=function(r){var e=0,t=this.v.length;if(void 0!==r)for(L2.assert.nonNegInt(r),e;t>e;e++)this.v[e]=Math.floor(Math.random()*(1+Number(r)));else for(e;t>e;e++)this.v[e]=Math.random();return this},L2.P._len=function(){var r=new L2.ArShell(this),e=this.v.length;r.v=new Array(e);for(var t=0;e>t;t++)r.v[t]=this.v[t].length;return r},L2.P._getInd=function(r,e){if("number"==typeof r){if(Math.round(r)!==r)throw new Error("integer expected");if(0>r&&(r=this[e]+r),r>=this[e]||0>r)throw new Error("index out of bounds")}else{if(void 0===r)throw new Error("undefined not a valid key, use 'undefined' if necessary");switch(e){case"r":if(!this.rk)throw new Error("table does not have row keys");r=this.rk[r];break;case"c":if(!this.ck)throw new Error("table does not have column keys");r=this.ck[r];break;default:if(!this.pk)throw new Error("table does not have page keys");r=this.pk[r]}if("number"!=typeof r)throw new Error("key does not exist")}return r},L2.P._getKey=function(r,e){var t=this[e+"k"];for(var n in t)if(t[n]===r)return n},L2.P._getIndLin=function(r){var e;if(e=this.v.length,"number"==typeof r){if(Math.round(r)!==r)throw new Error("integer expected");if(0>r&&(r=e+r),r>=e||0>r)throw new Error("index out of bounds")}else{if(!this.rk)throw new Error("table does not have row keys");if(void 0===r)throw new Error("undefined not a valid key, use 'undefined' if necessary");if(r=this.rk[r],"number"!=typeof r||0===e)throw new Error("key does not exist or table is empty")}return r},L2.P["_e:"]=function(r,e,t,n){if(0===this.v.length)throw new Error("non-empty table expected");return 3===arguments.length?this.v[this._getInd(r,"r")+this._getInd(e,"c")*this.r]=t:this.v[this._getInd(r,"r")+this._getInd(e,"c")*this.r+this._getInd(t,"p")*this.r*this.c]=n,this},L2.P._e=function(r,e,t){if(0===this.v.length)throw new Error("non-empty table expected");return 2===arguments.length?this.v[this._getInd(r,"r")+this._getInd(e,"c")*this.r]:this.v[this._getInd(r,"r")+this._getInd(e,"c")*this.r+this._getInd(t,"p")*this.r*this.c]},L2.P._vEnt=function(r){return this.v[this._getIndLin(r)]},L2.P["_vEnt:"]=function(r,e){return this.v[this._getIndLin(r)]=e,this},L2.P._slashCheckInd=function(r,e){return r>=0&&e>r&&Math.round(r)===r},L2.P._slashEnt2=function(r,e){return r=+r,e=+e,this._slashCheckInd(r,this.r)&&this._slashCheckInd(e,this.c)?this.v[r+e*this.r]:void 0},L2.P._slashEnt3=function(r,e,t){return r=+r,e=+e,t=+t,this._slashCheckInd(r,this.r)&&this._slashCheckInd(e,this.c)&&this._slashCheckInd(t,this.p)?this.v[r+e*this.r+t*this.r*this.c]:void 0},L2.P["_slashEnt1:"]=function(r,e){return r=+r,this._slashCheckInd(r,this.v.length)&&(this.v[r]=e),this},L2.P["_slashEnt2:"]=function(r,e,t){return r=+r,e=+e,this._slashCheckInd(r,this.r)&&this._slashCheckInd(e,this.c)&&0!==this.p&&(this.v[r+e*this.r]=t),this},L2.P["_slashEnt3:"]=function(r,e,t,n){return r=+r,e=+e,t=+t,this._slashCheckInd(r,this.r)&&this._slashCheckInd(e,this.c)&&this._slashCheckInd(t,this.p)&&(this.v[r+e*this.r+t*this.r*this.c]=n),this},L2.P._barEnt1=function(r){return this.v[this.rk[r]]},L2.P._barEnt2=function(r,e){return this.v[this.rk[r]+this.ck[e]*this.r]},L2.P._barEnt3=function(r,e,t){return this.v[this.rk[r]+this.ck[e]*this.r+this.pk[t]*this.r*this.c]},L2.P["_barEnt1:"]=function(r,e){var t=this.rk[r];return 0!==this.v.length&&"number"==typeof t&&(this.v[t]=e),this},L2.P["_barEnt2:"]=function(r,e,t){var n=this.rk[r],i=this.ck[e];return 0!==this.p&&"number"==typeof n&&"number"==typeof i&&(this.v[n+i*this.r]=t),this},L2.P["_barEnt3:"]=function(r,e,t,n){var i=this.rk[r],o=this.ck[e],s=this.pk[t];return"number"==typeof i&&"number"==typeof o&&"number"==typeof s&&(this.v[i+o*this.r+s*this.r*this.c]=n),this},L2.P["_v:"]=function(r,e){var t,n,i=this.v.length;if(1===arguments.length)if(r instanceof L2.Ar)if(n=r.v.length,1===n)for(t=0;i>t;t++)this.v[t]=r.v[0];else{if(n!==i)throw new Error("shape mismatch");for(t=0;i>t;t++)this.v[t]=r.v[t]}else for(t=0;i>t;t++)this.v[t]=r;else if(r instanceof L2.Ar){n=r.v.length;var o=new Array(n);for(t=0;n>t;t++)o[t]=this._getIndLin(r.v[t]);if(e instanceof L2.Ar){var s=e.v.length;if(1===s)for(t=0;n>t;t++)this.v[o[t]]=e.v[0];else{if(s!==n)throw new Error("shape mismatch");for(t=0;n>t;t++)this.v[o[t]]=e.v[t]}}else for(t=0;n>t;t++)this.v[o[t]]=e}else{if(e instanceof L2.Ar){if(1!==e.v.length)throw new Error("shape mismatch");e=e.v[0]}this.v[this._getIndLin(r)]=e}return this},L2.P._v=function(r){var e,t,n,i=this.v.length;if(0===arguments.length){for(t=new L2.Ar(i,void 0,!0),e=0;i>e;e++)t.v[e]=this.v[e];return t}if(r instanceof L2.Ar){for(n=r.v.length,t=new L2.Ar(n,void 0,!0),e=0;n>e;e++)t.v[e]=this.v[this._getIndLin(r.v[e])];return t}return new L2.ArJSA([this.v[this._getIndLin(r)]])},L2.P._oneDimSc=function(r,e,t){if(arguments.length>=3&&"cut"!==t)throw new Error("argument must be 'cut'");var n,i,o,s,h,f,a,v,u=new L2.ArShell(this,r),c=r+"k",l=0,w=u.r*u.c;if(i=this._getInd(e,r),this[c]&&(o="number"==typeof e?this._getKey(i,r):e,u[c]={},u[c][o]=0,t)){delete this[c][o];for(s in this[c])n=this[c][s],n>i&&(this[c][s]=n-1)}if("r"===r){for(u.v=new Array(u.c*u.p),f=0;f<u.p;f++)for(h=0;h<u.c;h++)u.v[l++]=this.v[i+h*u.r+f*w];if(t)for(l=0,v=new Array(this.v.length-u.v.length),f=0;f<u.p;f++)for(h=0;h<u.c;h++)for(s=0;s<u.r;s++)s!==i&&(v[l++]=this.v[s+h*u.r+f*w])}else if("c"===r){for(u.v=new Array(u.r*u.p),a=i*u.r,f=0;f<u.p;f++)for(s=0;s<u.r;s++)u.v[l++]=this.v[s+a+f*w];if(t)for(l=0,v=new Array(this.v.length-u.v.length),f=0;f<u.p;f++)for(h=0;h<u.c;h++)if(h!==i)for(s=0;s<u.r;s++)v[l++]=this.v[s+h*u.r+f*w]}else{for(u.v=new Array(w),s=i*w;(i+1)*w>s;s++)u.v[l++]=this.v[s];if(t){for(l=0,v=new Array(this.v.length-u.v.length),s=0;i*w>s;s++)v[l++]=this.v[s];for(s=(i+1)*w;s<this.v.length;s++)v[l++]=this.v[s]}}return u[r]=1,t&&(this[r]--,this.v=v),u},L2.P._oneDimAr=function(r,e,t){if(arguments.length>=3&&"cut"!==t)throw new Error("argument must be 'cut'");var n=e.v.length;if(1===n)return t?this._oneDimSc(r,e.v[0],t):this._oneDimSc(r,e.v[0]);var i,o,s,h,f,a,v,u,c,l,w,p=new L2.ArShell(this,r),L=r+"k",d=0,g=p.r*p.c;o=new Array(n);for(var v=0;n>v;v++)o[v]=this._getInd(e.v[v],r);if(t){if(!L2.aux.uniqueJSA(o))throw new Error("repeats not permitted when cutting");for(s=new Array(n),v=0;n>v;v++)s[v]=o[v];for(s.sort(function(r,e){return r-e}),h=p[r]-n,f=new Array(h),i=0,v=0;v<p[r];v++)v===s[i]?i++:f[d++]=v;d=0}if(this[L]){p[L]={},a=new Array(n);for(var v=0;n>v;v++)a[v]="number"==typeof e.v[v]?this._getKey(o[v],r):e.v[v],p[L][a[v]]=v;if(t){for(v=0;n>v;v++)delete this[L][a[v]];for(v in this[L]){for(i=0,u=0;n>u&&s[u]<this[L][v];u++)i++;this[L][v]-=i}}else if(!L2.aux.uniqueJSA(o))throw new Error("will result in duplicate key")}if("r"===r){for(L2.assert.maxEnt(w=n*p.c*p.p),p.v=new Array(w),c=0;c<p.p;c++)for(u=0;u<p.c;u++)for(v=0;n>v;v++)p.v[d++]=this.v[o[v]+u*p.r+c*g];if(t)for(l=new Array(this.v.length-p.v.length),d=0,c=0;c<p.p;c++)for(u=0;u<p.c;u++)for(v=0;h>v;v++)l[d++]=this.v[f[v]+u*p.r+c*g]}else if("c"===r){for(L2.assert.maxEnt(w=p.r*n*p.p),p.v=new Array(w),c=0;c<p.p;c++)for(u=0;n>u;u++)for(v=0;v<p.r;v++)p.v[d++]=this.v[v+o[u]*p.r+c*g];if(t)for(l=new Array(this.v.length-p.v.length),d=0,c=0;c<p.p;c++)for(u=0;h>u;u++)for(v=0;v<p.r;v++)l[d++]=this.v[v+f[u]*p.r+c*g]}else{for(L2.assert.maxEnt(w=g*n),p.v=new Array(w),c=0;n>c;c++)for(v=o[c]*g;v<(o[c]+1)*g;v++)p.v[d++]=this.v[v];if(t)for(l=new Array(this.v.length-p.v.length),d=0,c=0;h>c;c++)for(v=f[c]*g;v<(f[c]+1)*g;v++)l[d++]=this.v[v]}return p[r]=n,t&&(this[r]-=n,this.v=l),p},L2.P._twoDim=function(r,e,t,n){for(var i,o,s,h,f,a,v=new L2.ArShell(this,r),u=0,c=v.r*v.c,l=t.v.length,i=new Array(l),w=r+"k",p=n.v.length,o=new Array(p),L=e+"k",s=0;l>s;s++)i[s]=this._getInd(t.v[s],r);for(var s=0;p>s;s++)o[s]=this._getInd(n.v[s],e);if(this[w]){v[w]={};for(var s=0;l>s;s++)v[w]["number"==typeof t.v[s]?this._getKey(i[s],r):t.v[s]]=s;if(!L2.aux.uniqueJSA(i))throw new Error("will result in duplicate key")}if(this[L]){v[L]={};for(var s=0;p>s;s++)v[L]["number"==typeof n.v[s]?this._getKey(o[s],e):n.v[s]]=s;if(!L2.aux.uniqueJSA(o))throw new Error("will result in duplicate key")}if("r"===r&&"c"===e)for(L2.assert.maxEnt(a=l*p*v.p),v.v=new Array(a),f=0;f<v.p;f++)for(h=0;p>h;h++)for(s=0;l>s;s++)v.v[u++]=this.v[i[s]+o[h]*v.r+f*c];else if("r"===r&&"p"===e)for(L2.assert.maxEnt(a=l*v.c*p),v.v=new Array(a),f=0;p>f;f++)for(h=0;h<v.c;h++)for(s=0;l>s;s++)v.v[u++]=this.v[i[s]+h*v.r+o[f]*c];else for(L2.assert.maxEnt(a=v.r*l*p),v.v=new Array(a),f=0;p>f;f++)for(h=0;l>h;h++)for(s=0;s<v.r;s++)v.v[u++]=this.v[s+i[h]*v.r+o[f]*c];return v[r]=l,v[e]=p,v},L2.P._threeDim=function(r,e,t){for(var n,i,o,s,h,f,a,v=new L2.ArShell(this,"r"),u=0,c=v.r*v.c,l=r.v.length,n=new Array(l),w=e.v.length,i=new Array(w),p=t.v.length,o=new Array(p),s=0;l>s;s++)n[s]=this._getInd(r.v[s],"r");for(var s=0;w>s;s++)i[s]=this._getInd(e.v[s],"c");for(var s=0;p>s;s++)o[s]=this._getInd(t.v[s],"p");if(this.rk){v.rk={};for(var s=0;l>s;s++)v.rk["number"==typeof r.v[s]?this._getKey(n[s],"r"):r.v[s]]=s;if(!L2.aux.uniqueJSA(n))throw new Error("will result in duplicate key")}if(this.ck){v.ck={};for(var s=0;w>s;s++)v.ck["number"==typeof e.v[s]?this._getKey(i[s],"c"):e.v[s]]=s;if(!L2.aux.uniqueJSA(i))throw new Error("will result in duplicate key")}if(this.pk){v.pk={};for(var s=0;p>s;s++)v.pk["number"==typeof t.v[s]?this._getKey(o[s],"p"):t.v[s]]=s;if(!L2.aux.uniqueJSA(o))throw new Error("will result in duplicate key")}for(L2.assert.maxEnt(a=l*w*p),v.v=new Array(a),f=0;p>f;f++)for(h=0;w>h;h++)for(s=0;l>s;s++)v.v[u++]=this.v[n[s]+i[h]*v.r+o[f]*c];return v.r=l,v.c=w,v.p=p,v},L2.P._oneDimSetSc=function(r,e,t){var n=e.v.length;if(0===n)return this;var i,o,s,h,f=this.r*this.c;for(i=new Array(n),o=0;n>o;o++)i[o]=this._getInd(e.v[o],r);if("r"===r)for(h=0;h<this.p;h++)for(s=0;s<this.c;s++)for(o=0;n>o;o++)this.v[i[o]+s*this.r+h*f]=t;else if("c"===r)for(h=0;h<this.p;h++)for(s=0;n>s;s++)for(o=0;o<this.r;o++)this.v[o+i[s]*this.r+h*f]=t;else for(h=0;n>h;h++)for(o=i[h]*f;o<(i[h]+1)*f;o++)this.v[o]=t;return this},L2.P._oneDimSetAr=function(r,e,t){if(1===t.v.length)return this._oneDimSetSc(r,e,t.v[0]);var n,i,o,s,h=e.v.length,f=0,a=this.r*this.c;for(n=new Array(h),i=0;h>i;i++)n[i]=this._getInd(e.v[i],r);if("r"===r){if(h!==t.r||this.c!==t.c||this.p!==t.p)throw new Error("shape mismatch");for(s=0;s<this.p;s++)for(o=0;o<this.c;o++)for(i=0;h>i;i++)this.v[n[i]+o*this.r+s*a]=t.v[f++]}else if("c"===r){if(this.r!==t.r||h!==t.c||this.p!==t.p)throw new Error("shape mismatch");for(s=0;s<this.p;s++)for(o=0;h>o;o++)for(i=0;i<this.r;i++)this.v[i+n[o]*this.r+s*a]=t.v[f++]}else{if(this.r!==t.r||this.c!==t.c||h!==t.p)throw new Error("shape mismatch");for(s=0;h>s;s++)for(i=n[s]*a;i<(n[s]+1)*a;i++)this.v[i]=t.v[f++]}return this},L2.P._twoDimSet=function(r,e,t,n,i){for(var o,s,h,f,a,v=0,u=this.r*this.c,c=null,l=t.v.length,o=new Array(l),w=n.v.length,s=new Array(w),h=0;l>h;h++)o[h]=this._getInd(t.v[h],r);for(var h=0;w>h;h++)s[h]=this._getInd(n.v[h],e);if(i instanceof L2.Ar?1===i.v.length&&(c=i.v[0]):c=i,null!==c)if("r"===r&&"c"===e)for(a=0;a<this.p;a++)for(f=0;w>f;f++)for(h=0;l>h;h++)this.v[o[h]+s[f]*this.r+a*u]=c;else if("r"===r&&"p"===e)for(a=0;w>a;a++)for(f=0;f<this.c;f++)for(h=0;l>h;h++)this.v[o[h]+f*this.r+s[a]*u]=c;else for(a=0;w>a;a++)for(f=0;l>f;f++)for(h=0;h<this.r;h++)this.v[h+o[f]*this.r+s[a]*u]=c;else if("r"===r&&"c"===e){if(l!==i.r||w!==i.c||this.p!==i.p)throw new Error("shape mismatch");for(a=0;a<this.p;a++)for(f=0;w>f;f++)for(h=0;l>h;h++)this.v[o[h]+s[f]*this.r+a*u]=i.v[v++]}else if("r"===r&&"p"===e){if(l!==i.r||this.c!==i.c||w!==i.p)throw new Error("shape mismatch");for(a=0;w>a;a++)for(f=0;f<this.c;f++)for(h=0;l>h;h++)this.v[o[h]+f*this.r+s[a]*u]=i.v[v++]}else{if(this.r!==i.r||l!==i.c||w!==i.p)throw new Error("shape mismatch");for(a=0;w>a;a++)for(f=0;l>f;f++)for(h=0;h<this.r;h++)this.v[h+o[f]*this.r+s[a]*u]=i.v[v++]}return this},L2.P._threeDimSet=function(r,e,t,n){for(var i,o,s,h,f,a,v=0,u=this.r*this.c,c=null,l=r.v.length,i=new Array(l),w=e.v.length,o=new Array(w),p=t.v.length,s=new Array(p),h=0;l>h;h++)i[h]=this._getInd(r.v[h],"r");for(var h=0;w>h;h++)o[h]=this._getInd(e.v[h],"c");for(var h=0;p>h;h++)s[h]=this._getInd(t.v[h],"p");if(n instanceof L2.Ar?1===n.v.length&&(c=n.v[0]):c=n,null!==c)for(a=0;p>a;a++)for(f=0;w>f;f++)for(h=0;l>h;h++)this.v[i[h]+o[f]*this.r+s[a]*u]=c;else{if(l!==n.r||w!==n.c||p!==n.p)throw new Error("shape mismatch");for(a=0;p>a;a++)for(f=0;w>f;f++)for(h=0;l>h;h++)this.v[i[h]+o[f]*this.r+s[a]*u]=n.v[v++]}return this},L2.P._sort=function(r,e){var t=this.v.length,n=new Array(t);if(arguments.length>1){if("index"!==e)throw new Error("argument must be 'index'");for(var i=0;t>i;i++)n[i]=i;var o=this.v;return r?new L2.ArJSA(n.sort(function(r,e){return o[r]>=o[e]||void 0===o[e]||NaN===o[e]?-1:1})):new L2.ArJSA(n.sort(function(r,e){return o[r]<=o[e]||void 0===o[e]||NaN===o[e]?-1:1}))}for(var i=0;t>i;i++)n[i]=this.v[i];return r?new L2.ArJSA(n.sort(function(r,e){return r>=e||void 0===e||NaN===e?-1:1})):new L2.ArJSA(n.sort(function(r,e){return e>=r||void 0===e||NaN===e?-1:1}))},L2.P._setLabel=function(r,e,t){return"number"==typeof r?t.ck?this["label:"](e,0>r?t._getKey(t._getInd(r,"c"),"c"):t._getKey(r,"c")):this["label:"](e,0>r?t._getInd(r,"c"):r):this["label:"](e,r),this},L2.P._map=function(r){var e=new L2.ArShell(this),t=this.v.length;e.v=new Array(t);for(var n=0;t>n;n++)e.v[n]=r(this.v[n]);return e},L2.P._map_1_as=function(r,e){var t=new L2.ArShell(this),n=this.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r(this.v[i],e);return t},L2.P._map_1_sa=function(r,e){for(var t=this.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r(e,this.v[i]);var o=new L2.ArJSA(n);return o.r=this.r,o.c=this.c,o.p=this.p,o},L2.P._map_1_aa=function(r,e){var t=this.v.length,n=e.v.length;if(1===n)return this._map_1_as(r,e.v[0]);if(1===t)return e._map_1_sa(r,this.v[0]);if(this.r!==e.r||this.c!==e.c||this.p!==e.p)throw new Error("shape mismatch");var i=new L2.ArShell(this);i.v=new Array(t);for(var o=0;t>o;o++)i.v[o]=r(this.v[o],e.v[o]);return i},L2.P._mapMeth=function(r){var e=new L2.ArShell(this),t=this.v.length;e.v=new Array(t);for(var n=0;t>n;n++)e.v[n]=this.v[n][r]();return e},L2.P._mapMeth_as=function(r,e){var t=new L2.ArShell(this),n=this.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=this.v[i][r](e);return t},L2.P._mapMeth_sa=function(r,e){for(var t=this.v.length,n=new Array(t),i=0;t>i;i++)n[i]=e[r](this.v[i]);var o=new L2.ArJSA(n);return o.r=this.r,o.c=this.c,o.p=this.p,o},L2.P._mapMeth_aa=function(r,e){var t=this.v.length,n=e.v.length;if(1===n)return this._mapMeth_as(r,e.v[0]);if(1===t)return e._mapMeth_sa(r,this.v[0]);if(this.r!==e.r||this.c!==e.c||this.p!==e.p)throw new Error("shape mismatch");var i=new L2.ArShell(this);i.v=new Array(t);for(var o=0;t>o;o++)i.v[o]=this.v[o][r](e.v[o]);return i},L2.P._mapMeth_ass=function(r,e,t){var n=new L2.ArShell(this),i=this.v.length;n.v=new Array(i);for(var o=0;i>o;o++)n.v[o]=this.v[o][r](e,t);return n},L2.P._mapMeth_date=function(r,e,t,n,i){var o,s=new L2.ArShell(this),h=this.v.length,f=arguments.length;switch(s.v=new Array(h),f){case 2:for(o=0;h>o;o++)s.v[o]=new Date(new Date(this.v[o])[r](e));break;case 3:for(o=0;h>o;o++)s.v[o]=new Date(new Date(this.v[o])[r](e,t));break;case 4:for(o=0;h>o;o++)s.v[o]=new Date(new Date(this.v[o])[r](e,t,n));break;default:for(o=0;h>o;o++)s.v[o]=new Date(new Date(this.v[o])[r](e,t,n,i))}return s},L2.P["!"]=function(){var r=new L2.ArShell(this),e=this.v.length;r.v=new Array(e);for(var t=0;e>t;t++)r.v[t]=!this.v[t];return r},L2.P._unary=function(){var r=new L2.ArShell(this),e=this.v.length;r.v=new Array(e);for(var t=0;e>t;t++)r.v[t]=-this.v[t];return r},L2.symb={},L2.symb.as={"+":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]+e;return t},"-":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]-e;return t},"*":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]*e;return t},"/":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]/e;return t},"%":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]%e;return t},"==":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]===e;return t},"!=":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]!==e;return t},"<":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]<e;return t},"<=":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]<=e;return t},">":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]>e;return t},">=":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]>=e;return t},"&&":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]&&e;return t},"||":function(r,e){var t=new L2.ArShell(r),n=r.v.length;t.v=new Array(n);for(var i=0;n>i;i++)t.v[i]=r.v[i]||e;return t}},L2.symb.sa={"+":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r+e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"-":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r-e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"*":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r*e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"/":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r/e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"%":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r%e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"==":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r===e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"!=":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r!==e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"<":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r<e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"<=":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r<=e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},">":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r>e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},">=":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r>=e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"&&":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r&&e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o},"||":function(r,e){for(var t=e.v.length,n=new Array(t),i=0;t>i;i++)n[i]=r||e.v[i];var o=new L2.ArJSA(n);return o.r=e.r,o.c=e.c,o.p=e.p,o}},L2.symb.aa={apply:function(r,e,t){var n=e.v.length,i=t.v.length;if(1===i)return L2.symb.as[r](e,t.v[0]);if(1===n)return L2.symb.sa[r](e.v[0],t);if(e.r!==t.r||e.c!==t.c||e.p!==t.p)throw new Error("shape mismatch");var o=new L2.ArShell(e);return o.v=L2.symb.aa[r](e.v,t.v),o},"+":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]+e[i];return n},"-":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]-e[i];return n},"*":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]*e[i];return n},"/":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]/e[i];return n},"%":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]%e[i];return n},"==":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]===e[i];return n},"!=":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]!==e[i];return n},"<":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]<e[i];return n},"<=":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]<=e[i];return n},">":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]>e[i];return n},">=":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]>=e[i];return n},"&&":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]&&e[i];return n},"||":function(r,e){for(var t=r.length,n=new Array(t),i=0;t>i;i++)n[i]=r[i]||e[i];return n}},L2.symb.logic={"||":function(r,e){return r||e},"&&":function(r,e){return r&&e}},delete L2.P;
L2.aux.onLoad=function(e,t){t?document.addEventListener("DOMContentLoaded",e):window.addEventListener("load",e)},L2.aux.ajaxGet=function(e,t,r,n){var o=new XMLHttpRequest;o.responseType="text",o.onreadystatechange=function(){if(4===o.readyState){if(200!==o.status)throw new Error("status: "+o.status+(o.statusText?", "+o.statusText:""));t(o.responseText)}},o.open("GET",e,!0,r,n),o.send()},L2.aux.ajaxLoad=function(e,t,r,n){if(".L2T"!==e.slice(-4).toUpperCase())throw new Error("file extension must be '.L2T'");L2.aux.ajaxGet(e,function(e){t(L2.sc.fromStr(e))},r,n)},L2.html=function(e){function t(e){if(!e.rk||1!==e.c||1!==e.p)throw new Error("dictionary expected");var t,r,n=new Array(2*e.v.length);for(var o in e.rk)t=e.rk[o],n[2*t]=o,r=e.v[t],n[2*t+1]=r instanceof L2.Box?r._contents_:r;return n}var r=function(){return"element list (internal type)"};r._html_={};var n=e.length;r._html_.size=n;var o=["id","innerHTML","outerHTML","scrollLeft","scrollTop"];return r._html_.setGen=function(i){var l,s,a,f,u,h=i[0];for(i=2===i.length?t(i[1]):i=i.slice(1),a=i.length,s=0;a>s;s+=2)switch(f=i[s],f instanceof L2.Ar&&(f=f.v[0]),u=i[s+1],h){case"setStyle":if(u instanceof L2.Ar)for(l=0;n>l;l++)e[l].style[f]=String(u.v[l%u.v.length]);else for(u=String(u),l=0;n>l;l++)e[l].style[f]=u;break;case"setProp":if(-1===o.indexOf(f))throw new Error("invalid property: "+f);if(u instanceof L2.Ar)for(l=0;n>l;l++)e[l][f]=String(u.v[l%u.v.length]);else for(u=String(u),l=0;n>l;l++)e[l][f]=u;break;case"setAttr":if(u instanceof L2.Ar)for(l=0;n>l;l++)e[l].setAttribute(f,String(u.v[l%u.v.length]));else for(u=String(u),l=0;n>l;l++)e[l].setAttribute(f,u)}return r},r._html_.adjHTML=function(t,o){var i,l;if(o instanceof L2.Ar)for(l=o.v.length,i=0;n>i;i++)e[i].insertAdjacentHTML(t,o.v[i%l]);else for(i=0;n>i;i++)e[i].insertAdjacentHTML(t,o);return r},r._html_.remElm=function(){for(var t=0;n>t;t++)e[t].parentNode.removeChild(e[t]);return!0},r._html_.loop=function(t){for(var o=0;n>o;o++)t(L2.html([e[o]]),o,r);return r},r._html_.getGen=function(t,r){var o,i,l=new Array(n);switch(t){case"style":for(o=0;n>o;o++)l[o]=getComputedStyle(e[o]).getPropertyValue(r);break;case"prop":for(o=0;n>o;o++)l[o]=L2.aux.basicType(e[o][r]);break;case"attr":for(o=0;n>o;o++)l[o]=null===(i=e[o].getAttribute(r))?void 0:i;break;case"hasAttr":for(o=0;n>o;o++)l[o]=e[o].hasAttribute(r);break;case"hasClass":for(o=0;n>o;o++)l[o]=e[o].classList.contains(r)}return new L2.ArJSA(l)},r._html_.changeClass=function(t,o){var i,l,s;if(o instanceof L2.Ar)for(l=0,s=o.v.length;s>l;l++)for(i=0;n>i;i++)e[i].classList[t](o.v[l]);else for(i=0;n>i;i++)e[i].classList[t](o);return r},r._html_.remAttr=function(t){var o,i,l;if(t instanceof L2.Ar)for(i=0,l=t.v.length;l>i;i++)for(o=0;n>o;o++)e[o].removeAttribute(t.v[i]);else for(o=0;n>o;o++)e[o].removeAttribute(t);return r},r._html_.at=function(t){function r(e){if("number"!=typeof e)throw new Error("index must be a number");if(Math.round(e)!==e)throw new Error("integer expected");if(0>e&&(e=n+e),e>=n||0>e)throw new Error("index out of bounds");return e}var o,i,l;if(t instanceof L2.Ar){if(i=t.v.length,0===i)return L2.html([]);if(0===n)throw new Error("index out of bounds");for(l=new Array(i),o=0;i>o;o++)l[o]=r(t.v[o]);if(!L2.aux.uniqueJSA(l))throw new Error("repeated indices not allowed");for(o=0;i>o;o++)l[o]=e[l[o]];return L2.html(l)}return L2.html([e[r(t)]])},r._html_.on=function(t,o,i){var l,s,a;if("function"!=typeof o)throw new Error("function expected");for(s=function(e){o(L2.event(e))},l=0;n>l;l++)if(a=e[l],a.addEventListener(t,s),void 0!==i){if(a._L2listeners_)if(a._L2listeners_[t]){if(a._L2listeners_[t][i])throw a.removeEventListener(t,s),new Error("will result in duplicate name")}else a._L2listeners_[t]={};else a._L2listeners_={},a._L2listeners_[t]={};a._L2listeners_[t][i]=s}return r},r._html_.off=function(t,o){var i,l,s,a,f;for(i=0;n>i;i++)if(f=e[i],f._L2listeners_&&f._L2listeners_[t])if(a=f._L2listeners_[t],L2.ge.isNil(o)){for(l in a)f.removeEventListener(t,a[l]);delete f._L2listeners_[t]}else{if(o instanceof L2.Ar)for(l=0;l<o.v.length;l++)void 0!==o.v[l]&&(s=a[o.v[l]],s&&(f.removeEventListener(t,s),delete a[o.v[l]]));else s=a[o],s&&(f.removeEventListener(t,s),delete a[o]);0===Object.keys(a).length&&delete f._L2listeners_[t]}return r},r._html_.checkElmt=function(){for(var t=0;n>t;t++)if(null===e[t])throw new Error("HTML element expected");return r},r._html_._elmt=function(t){return e[t]},r},L2.html.fit=function(e,t,r){var n,o,i,l;if("string"!=typeof e)throw new Error("first argument must be a string");arguments.length>2&&L2.assert.func(r);var s=document.querySelectorAll(e);if(l=t.r-s.length,0>l){for(i=new Array(t.r),n=0;n<t.r;n++)i[n]=s[n];for(n=t.r,o=s.length;o>n;n++)s[n].parentNode.removeChild(s[n]);s=i}else if(l>0&&(r&&(r.length>1?r(l,t.slice("r",s.length,t.r-1)):r(l),s=document.querySelectorAll(e)),s.length!==t.r))throw new Error("number of elements must equal number of rows in data");return L2.html(s)},L2.html.idKey=function(e,t,r,n){var o,i,l,s,a,f,u,h,c,v,d,m=arguments.length;if("string"!=typeof e)throw new Error("first argument must be a string");if(!t.rk)throw new Error("second argument must have row keys");if(v=document.querySelectorAll(e),void 0!==r&&"function"!=typeof r)throw new Error("third argument must be undefined or a function");if(m>3&&"keep"!==n)throw new Error("fourth argument must be 'keep'");if(0===v.length){if(0===t.r)return L2.html(v);r&&(r.length>1?r(t.key("r"),t):r(t.key("r")))}else{if(0===t.r){if(!n)for(o=0,l=v.length;l>o;o++)v[o].parentNode.removeChild(v[o]);return L2.html([])}if(r){f={};for(o in t.rk)f[o]=t.rk[o];for(o=0,i=0,l=v.length;l>o;o++)if(s=v[o],s.hasAttribute("id")&&(a=s.getAttribute("id"))in f){if(++i===t.r)break;delete f[a]}if(i!==t.r){for(u=L2.aux.keyValFlip(f),h=Object.keys(u).sort(function(e,t){return e-t}),c=new Array(h.length),o=0,l=h.length;l>o;o++)c[o]=u[h[o]];c=new L2.ArJSA(c),r.length>1?r(c,t._oneDimAr("r",c)):r(c)}}}if(v=document.querySelectorAll(e),v.length<t.r)throw new Error("row key with no matching element id");f={};for(o in t.rk)f[o]=t.rk[o];for(d=new Array(t.r),o=0,i=0,l=v.length;l>o;o++)if(s=v[o],i===t.r){if(n)break;s.parentNode.removeChild(s)}else s.hasAttribute("id")&&(a=s.getAttribute("id"))in f?(d[f[a]]=s,++i,delete f[a]):n||s.parentNode.removeChild(s);if(i!==t.r)throw new Error("row key with no matching element id");return L2.html(d)},L2.event=function(e){var t=function(){return"event (internal type)"};return t._event_=e,t._event_.stop=function(t){var r,n;if(L2.ge.isNil(t))e.preventDefault(),e.stopPropagation();else if(t instanceof L2.Ar)for(var r=0;r<t.v.length;r++)if(n=t.v[r],"default"===n)e.preventDefault();else if("propagation"===n)e.stopPropagation();else{if("now"!==n)throw new Error("invalid value");e.stopImmediatePropagation()}else if("default"===t)e.preventDefault();else if("propagation"===t)e.stopPropagation();else{if("now"!==t)throw new Error("invalid value");e.stopImmediatePropagation()}},t};